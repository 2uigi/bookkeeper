"use strict";(self.webpackChunksite_3=self.webpackChunksite_3||[]).push([[7307],{3905:function(e,t,a){a.d(t,{Zo:function(){return h},kt:function(){return c}});var l=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,l)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function n(e,t){if(null==e)return{};var a,l,r=function(e,t){if(null==e)return{};var a,l,r={},i=Object.keys(e);for(l=0;l<i.length;l++)a=i[l],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(l=0;l<i.length;l++)a=i[l],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=l.createContext({}),p=function(e){var t=l.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},h=function(e){var t=p(e.components);return l.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return l.createElement(l.Fragment,{},t)}},k=l.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,h=n(e,["components","mdxType","originalType","parentName"]),k=p(a),c=r,d=k["".concat(s,".").concat(c)]||k[c]||u[c]||i;return a?l.createElement(d,o(o({ref:t},h),{},{components:a})):l.createElement(d,o({ref:t},h))}));function c(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,o=new Array(i);o[0]=k;var n={};for(var s in t)hasOwnProperty.call(t,s)&&(n[s]=t[s]);n.originalType=e,n.mdxType="string"==typeof e?e:r,o[1]=n;for(var p=2;p<i;p++)o[p]=a[p];return l.createElement.apply(null,o)}return l.createElement.apply(null,a)}k.displayName="MDXCreateElement"},9053:function(e,t,a){a.r(t),a.d(t,{contentTitle:function(){return s},default:function(){return k},frontMatter:function(){return n},metadata:function(){return p},toc:function(){return h}});var l=a(7462),r=a(3366),i=(a(7294),a(3905)),o=["components"],n={},s="Release notes",p={type:"mdx",permalink:"/release-notes",source:"@site/src/pages/release-notes.md",title:"Release notes",description:"4.15.0",frontMatter:{}},h=[{value:"4.15.0",id:"4150",level:2},{value:"Breaking Changes",id:"breaking-changes",level:3},{value:"Highlights",id:"highlights",level:3},{value:"Configuration",id:"configuration",level:4},{value:"Features",id:"features",level:4},{value:"Improvements",id:"improvements",level:4},{value:"Notable fixes",id:"notable-fixes",level:4},{value:"Dependencies changes",id:"dependencies-changes",level:4},{value:"Details",id:"details",level:3},{value:"4.14.4",id:"4144",level:2},{value:"Highlights",id:"highlights-1",level:3},{value:"Improvements",id:"improvements-1",level:4},{value:"Dependency updates",id:"dependency-updates",level:4},{value:"Details",id:"details-1",level:3},{value:"4.14.3",id:"4143",level:2},{value:"Highlights",id:"highlights-2",level:3},{value:"Improvements",id:"improvements-2",level:4},{value:"Dependency updates",id:"dependency-updates-1",level:4},{value:"Details",id:"details-2",level:3},{value:"4.14.2",id:"4142",level:2},{value:"Bugs",id:"bugs",level:4},{value:"Details",id:"details-3",level:3},{value:"4.14.1",id:"4141",level:2},{value:"Bugs",id:"bugs-1",level:4},{value:"Details",id:"details-4",level:3},{value:"4.14.0",id:"4140",level:2},{value:"Highlights",id:"highlights-3",level:3},{value:"Bookkeeper is FIPS compliant by default now",id:"bookkeeper-is-fips-compliant-by-default-now",level:4},{value:"Data reliability",id:"data-reliability",level:4},{value:"Table Service (stream storage) reliability improvements",id:"table-service-stream-storage-reliability-improvements",level:4},{value:"Compaction logic improvements",id:"compaction-logic-improvements",level:4},{value:"Dependency updates",id:"dependency-updates-2",level:4},{value:"Other improvements and fixes",id:"other-improvements-and-fixes",level:4},{value:"Other",id:"other",level:4},{value:"Details",id:"details-5",level:3},{value:"4.13.0",id:"4130",level:2},{value:"Highlights",id:"highlights-4",level:3},{value:"Table Service (stream storage) reliability improvements",id:"table-service-stream-storage-reliability-improvements-1",level:4},{value:"Other improvements",id:"other-improvements",level:4},{value:"Dependency updates",id:"dependency-updates-3",level:4},{value:"Details",id:"details-6",level:3},{value:"4.12.1",id:"4121",level:2},{value:"News and noteworthy",id:"news-and-noteworthy",level:3},{value:"Details",id:"details-7",level:3},{value:"4.12.0",id:"4120",level:2},{value:"News and noteworthy",id:"news-and-noteworthy-1",level:3},{value:"Details",id:"details-8",level:3},{value:"4.11.1",id:"4111",level:2},{value:"Highlights",id:"highlights-5",level:3},{value:"Changes",id:"changes",level:4},{value:"Compatiblity",id:"compatiblity",level:3},{value:"Full list of changes",id:"full-list-of-changes",level:3},{value:"4.11.0",id:"4110",level:2},{value:"News and noteworthy",id:"news-and-noteworthy-2",level:3},{value:"Changes",id:"changes-1",level:4},{value:"Full list of changes",id:"full-list-of-changes-1",level:3},{value:"4.10.0",id:"4100",level:2},{value:"News and noteworthy",id:"news-and-noteworthy-3",level:3},{value:"Full list of changes",id:"full-list-of-changes-2",level:3},{value:"4.9.2",id:"492",level:2},{value:"Dependencies Changes",id:"dependencies-changes-1",level:4},{value:"Bug Fixes",id:"bug-fixes",level:4},{value:"Full list of changes",id:"full-list-of-changes-3",level:3},{value:"4.9.1",id:"491",level:2},{value:"Dependencies Changes",id:"dependencies-changes-2",level:4},{value:"Bug Fixes",id:"bug-fixes-1",level:4},{value:"Full list of changes",id:"full-list-of-changes-4",level:3},{value:"4.9.0",id:"490",level:2},{value:"Highlights",id:"highlights-6",level:3},{value:"Dependencies Changes",id:"dependencies-changes-3",level:4},{value:"Public API",id:"public-api",level:4},{value:"Configuration",id:"configuration-1",level:4},{value:"Bookie",id:"bookie",level:5},{value:"Client",id:"client",level:5},{value:"Metadata",id:"metadata",level:4},{value:"Table Service",id:"table-service",level:4},{value:"Operations",id:"operations",level:4},{value:"HTTP Admin REST Endpoint",id:"http-admin-rest-endpoint",level:5},{value:"BookieShell",id:"bookieshell",level:5},{value:"MDC",id:"mdc",level:5},{value:"Stats Annotation",id:"stats-annotation",level:5},{value:"Builds &amp; Testing",id:"builds--testing",level:4},{value:"Enhancements",id:"enhancements",level:4},{value:"Bug Fixes",id:"bug-fixes-2",level:4},{value:"Bookie",id:"bookie-1",level:5},{value:"AutoRecovery",id:"autorecovery",level:5},{value:"Client",id:"client-1",level:5},{value:"Full list of changes",id:"full-list-of-changes-5",level:3},{value:"4.8.2",id:"482",level:2},{value:"Highlights",id:"highlights-7",level:3},{value:"Dependency Changes",id:"dependency-changes",level:4},{value:"Full list of changes",id:"full-list-of-changes-6",level:3},{value:"4.8.1",id:"481",level:2},{value:"Highlights",id:"highlights-8",level:3},{value:"Dependency Changes",id:"dependency-changes-1",level:4},{value:"Full list of changes",id:"full-list-of-changes-7",level:3},{value:"4.8.0",id:"480",level:2},{value:"Highlights",id:"highlights-9",level:3},{value:"New WriteFlag DEFERRED_SYNC",id:"new-writeflag-deferred_sync",level:4},{value:"New behaviour for Netty ByteBuf reference count management",id:"new-behaviour-for-netty-bytebuf-reference-count-management",level:4},{value:"Multiple Active Entrylogs",id:"multiple-active-entrylogs",level:4},{value:"Table Storage Service",id:"table-storage-service",level:4},{value:"Make ExplicitLAC persistent",id:"make-explicitlac-persistent",level:4},{value:"Ensemble change on Delayed Write Failure",id:"ensemble-change-on-delayed-write-failure",level:4},{value:"Full list of changes",id:"full-list-of-changes-8",level:3},{value:"4.7.3",id:"473",level:2},{value:"Highlights",id:"highlights-10",level:3},{value:"Full list of changes",id:"full-list-of-changes-9",level:3},{value:"4.7.2",id:"472",level:2},{value:"Highlights",id:"highlights-11",level:3},{value:"Dependency Changes",id:"dependency-changes-2",level:4},{value:"Full list of changes",id:"full-list-of-changes-10",level:3},{value:"4.7.1",id:"471",level:2},{value:"Highlights",id:"highlights-12",level:3},{value:"Dependencies Upgrade",id:"dependencies-upgrade",level:4},{value:"Full list of changes",id:"full-list-of-changes-11",level:3},{value:"4.7.0",id:"470",level:2},{value:"Highlights",id:"highlights-13",level:3},{value:"Dependencies Changes",id:"dependencies-changes-4",level:4},{value:"Public API",id:"public-api-1",level:4},{value:"Fluent API",id:"fluent-api",level:5},{value:"CRC32C",id:"crc32c",level:5},{value:"Security",id:"security",level:4},{value:"DbLedgerStorage",id:"dbledgerstorage",level:4},{value:"Metadata API",id:"metadata-api",level:4},{value:"Performance",id:"performance",level:4},{value:"Operations",id:"operations-1",level:4},{value:"BookieShell",id:"bookieshell-1",level:4},{value:"ReadOnly Mode Support",id:"readonly-mode-support",level:4},{value:"Builds &amp; Testing",id:"builds--testing-1",level:4},{value:"Full list of changes",id:"full-list-of-changes-12",level:3},{value:"4.6.2",id:"462",level:2},{value:"Highlights",id:"highlights-14",level:3},{value:"Dependencies Upgrade",id:"dependencies-upgrade-1",level:4},{value:"Full list of changes",id:"full-list-of-changes-13",level:3},{value:"4.6.1",id:"461",level:2},{value:"Highlights",id:"highlights-15",level:3},{value:"Dependencies Upgrade",id:"dependencies-upgrade-2",level:4},{value:"Full list of changes",id:"full-list-of-changes-14",level:3},{value:"4.6.0",id:"460",level:2},{value:"Highlights",id:"highlights-16",level:3},{value:"Dependencies Upgrade",id:"dependencies-upgrade-3",level:4},{value:"Bookie enhancement",id:"bookie-enhancement",level:4},{value:"BookKeeper Admin REST API",id:"bookkeeper-admin-rest-api",level:4},{value:"New BookKeeper API",id:"new-bookkeeper-api",level:4},{value:"Performance improvement",id:"performance-improvement",level:4},{value:"Deployment or Ease of use",id:"deployment-or-ease-of-use",level:4},{value:"Existing API changes",id:"existing-api-changes",level:3},{value:"Full list of changes",id:"full-list-of-changes-15",level:3},{value:"4.5.1",id:"451",level:2},{value:"Highlights",id:"highlights-17",level:3},{value:"Dependencies Upgrade",id:"dependencies-upgrade-4",level:4},{value:"Full list of changes",id:"full-list-of-changes-16",level:3},{value:"4.5.0",id:"450",level:2},{value:"Highlights",id:"highlights-18",level:3},{value:"Dependencies Upgrade",id:"dependencies-upgrade-5",level:4},{value:"Security",id:"security-1",level:4},{value:"Public API",id:"public-api-2",level:4},{value:"LedgerHandleAdv",id:"ledgerhandleadv",level:5},{value:"Long Poll",id:"long-poll",level:5},{value:"Explicit LAC",id:"explicit-lac",level:5},{value:"Performance",id:"performance-1",level:4},{value:"Netty 4 Upgrade",id:"netty-4-upgrade",level:5},{value:"Delay Ensemble Change",id:"delay-ensemble-change",level:5},{value:"Parallel Ledger Recovery",id:"parallel-ledger-recovery",level:5},{value:"Multiple Journals",id:"multiple-journals",level:5},{value:"Operations",id:"operations-2",level:4},{value:"LongHierarchicalLedgerManager",id:"longhierarchicalledgermanager",level:5},{value:"Weight-based placement policy",id:"weight-based-placement-policy",level:5},{value:"Customized Ledger Metadata",id:"customized-ledger-metadata",level:5},{value:"Add Prometheus stats provider",id:"add-prometheus-stats-provider",level:5},{value:"Add more tools in BookieShell",id:"add-more-tools-in-bookieshell",level:5},{value:"Full list of changes",id:"full-list-of-changes-17",level:3},{value:"JIRA",id:"jira",level:4},{value:"Sub-task",id:"sub-task",level:5},{value:"Github",id:"github",level:4}],u={toc:h};function k(e){var t=e.components,a=(0,r.Z)(e,o);return(0,i.kt)("wrapper",(0,l.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"release-notes"},"Release notes"),(0,i.kt)("h2",{id:"4150"},"4.15.0"),(0,i.kt)("p",null,"Release 4.15 includes many upgrades to third party libraries marked with CVEs,\nadds more configuration options, extends REST API,\nadds an option to run without journal, improves memory utilization and stability, and more!"),(0,i.kt)("p",null,"Apache BookKeeper users are encouraged to upgrade to 4.15.0. The technical details of this release are summarized\nbelow."),(0,i.kt)("h3",{id:"breaking-changes"},"Breaking Changes"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"BookieServer")," API changed and the code that creates its instances will require addition\nof the ",(0,i.kt)("inlineCode",{parentName:"p"},"UncleanShutdownDetection")," parameter.\nSee ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/pull/2936"},"PR 2936")," for details and examples.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"Bookie")," class now is an interface with implementation in ",(0,i.kt)("inlineCode",{parentName:"p"},"BookieImpl"),".\nCode that uses it may need changes.\nFor details please refer to ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/pull/2717"},"PR 2717"),".")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"LedgerUnderreplicationManager")," interface added a new method.\nCode that implements the interface will need changes.\nSee ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/pull/2805"},"PR 2805")," for details.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"MetadataBookieDriver")," interface added a new method and removed an old one.\n",(0,i.kt)("inlineCode",{parentName:"p"},"RegistrationManager")," interface added a new method.\n",(0,i.kt)("inlineCode",{parentName:"p"},"ByteBufAllocatorWithOomHandler")," interface is added and used instead of\nthe ",(0,i.kt)("inlineCode",{parentName:"p"},"ByteBufAllocator")," in multiple places.\nCode that implements the interfaces will need changes.\nSee ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/pull/2901"},"PR 2901")," for details."))),(0,i.kt)("h3",{id:"highlights"},"Highlights"),(0,i.kt)("h4",{id:"configuration"},"Configuration"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/2708"},"ledgerMetadataVersion"),":\nBookKeeper-Client config to write ledger metadata with configured version."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/2761"},"clientTcpUserTimeoutMillis"),":\nAdded TCP_USER_TIMEOUT to Epoll channel config."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/2802"},"auditorMaxNumberOfConcurrentOpenLedgerOperations and auditorAcquireConcurrentOpenLedgerOperationsTimeOutMSec"),"\nAdd auditor get ledger throttle to avoid auto recovery zk session."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/2824"},"dbStorage_rocksDB_format_version"),"\nmake rocksdb format version configurable.")),(0,i.kt)("h4",{id:"features"},"Features"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Running without journal. See ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/2706"},"BP-46")," for details."),(0,i.kt)("li",{parentName:"ul"},"A REST API to get or update bookie readOnly state. ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/2799"},"Details")),(0,i.kt)("li",{parentName:"ul"},"Separate config files for Rocks DB. ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/3056/"},"Details"))),(0,i.kt)("h4",{id:"improvements"},"Improvements"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Build and tests work on JDK 17"),(0,i.kt)("li",{parentName:"ul"},"CLI: listunderreplicated command has an option to return count without printing all ledgers ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/3228"},"https://github.com/apache/bookkeeper/pull/3228")),(0,i.kt)("li",{parentName:"ul"},"Stream Storage: support an optional time to live (TTL) on a per table basis ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/2775"},"https://github.com/apache/bookkeeper/pull/2775")),(0,i.kt)("li",{parentName:"ul"},"Added dDb ledger index rebuild operation and CLI commands ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/2774"},"https://github.com/apache/bookkeeper/pull/2774")),(0,i.kt)("li",{parentName:"ul"},"Support multi ledger directories for rocksdb backend entryMetadataMap ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/2965"},"https://github.com/apache/bookkeeper/pull/2965")),(0,i.kt)("li",{parentName:"ul"},"Improved memory utilization",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"support shrink for ConcurrentLong map or set ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/3074"},"https://github.com/apache/bookkeeper/pull/3074")),(0,i.kt)("li",{parentName:"ul"},"reduce unnecessary expansions for ConcurrentLong map and set ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/3072"},"https://github.com/apache/bookkeeper/pull/3072")))),(0,i.kt)("li",{parentName:"ul"},"read speed rate limiter for scanning entry log file in entryMetadataMap rebuild ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/2963"},"https://github.com/apache/bookkeeper/pull/2963")),(0,i.kt)("li",{parentName:"ul"},"Other improvements in areas such as test, documentation, CI, metrics, logging, and CLI tools.")),(0,i.kt)("h4",{id:"notable-fixes"},"Notable fixes"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Bookkeeper client might not close the channel for several minutes after a Bookie crashes ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/issues/2482"},"https://github.com/apache/bookkeeper/issues/2482")),(0,i.kt)("li",{parentName:"ul"},"Stream storage: Ensure progress while restoring from checkpoint. ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/2764"},"https://github.com/apache/bookkeeper/pull/2764")),(0,i.kt)("li",{parentName:"ul"},"Entry Log GC may get blocked when using entryLogPerLedgerEnabled option ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/2779"},"https://github.com/apache/bookkeeper/pull/2779")),(0,i.kt)("li",{parentName:"ul"},"Fix region aware placement policy use disk weight ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/2981"},"https://github.com/apache/bookkeeper/pull/2981")),(0,i.kt)("li",{parentName:"ul"},"Some cases that could cause RocksDB segfault"),(0,i.kt)("li",{parentName:"ul"},"DistributedLogManager can skip over a segment on read. ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/3064"},"https://github.com/apache/bookkeeper/pull/3064")),(0,i.kt)("li",{parentName:"ul"},"Backpressure: check all bookies of writeset are writable ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/3055"},"https://github.com/apache/bookkeeper/pull/3055")),(0,i.kt)("li",{parentName:"ul"},"Fix Journal.ForceWriteThread.forceWriteRequests.put deadlock ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/2962"},"https://github.com/apache/bookkeeper/pull/2962")),(0,i.kt)("li",{parentName:"ul"},"PendingReadOp: Fix ledgerEntryImpl reuse problem ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/3110"},"https://github.com/apache/bookkeeper/pull/3110")),(0,i.kt)("li",{parentName:"ul"},"Region/rack aware placement policy: replace bookie bug ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/2642"},"https://github.com/apache/bookkeeper/pull/2642")),(0,i.kt)("li",{parentName:"ul"},"ReplicationWorker: numLedgersReplicated metric does not update ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/3218"},"https://github.com/apache/bookkeeper/pull/3218")),(0,i.kt)("li",{parentName:"ul"},"Force GC doesn't work under forceAllowCompaction when disk is full ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/3205"},"https://github.com/apache/bookkeeper/pull/3205"))),(0,i.kt)("h4",{id:"dependencies-changes"},"Dependencies changes"),(0,i.kt)("p",null,"Upgraded dependencies to address CVEs include:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"vertx"),(0,i.kt)("li",{parentName:"ul"},"freebuilder"),(0,i.kt)("li",{parentName:"ul"},"libthrift"),(0,i.kt)("li",{parentName:"ul"},"netty"),(0,i.kt)("li",{parentName:"ul"},"bouncycastle"),(0,i.kt)("li",{parentName:"ul"},"commonsIO"),(0,i.kt)("li",{parentName:"ul"},"jetty"),(0,i.kt)("li",{parentName:"ul"},"log4j"),(0,i.kt)("li",{parentName:"ul"},"grpc"),(0,i.kt)("li",{parentName:"ul"},"protobuf"),(0,i.kt)("li",{parentName:"ul"},"snakeyaml"),(0,i.kt)("li",{parentName:"ul"},"RocksDB"),(0,i.kt)("li",{parentName:"ul"},"jackson"),(0,i.kt)("li",{parentName:"ul"},"jackson-databind"),(0,i.kt)("li",{parentName:"ul"},"Zookeeper"),(0,i.kt)("li",{parentName:"ul"},"http-core"),(0,i.kt)("li",{parentName:"ul"},"dropwizard metrics")),(0,i.kt)("p",null,"Dependency on log4j v.1 is removed."),(0,i.kt)("h3",{id:"details"},"Details"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/issues?q=+label%3Arelease%2F4.15.0"},"https://github.com/apache/bookkeeper/issues?q=+label%3Arelease%2F4.15.0")),(0,i.kt)("h2",{id:"4144"},"4.14.4"),(0,i.kt)("p",null,"Release 4.14.4 includes multiple stability, performance, and security fixes."),(0,i.kt)("p",null,"Apache BookKeeper users are encouraged to upgrade to 4.14.4.\nThe technical details of this release are summarized below."),(0,i.kt)("h3",{id:"highlights-1"},"Highlights"),(0,i.kt)("h4",{id:"improvements-1"},"Improvements"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2952]"," Allow to easily override zkServers with metadataServiceUri"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2935]"," ReplicationWorker should not try to create a ZK based LedgerManagerFactory"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2870]"," Add skip unrecoverable ledger option for bookkeeper shell recover command"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2847]"," ISSUE #2846 Allow to run on java 17")),(0,i.kt)("h4",{id:"dependency-updates"},"Dependency updates"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2934]"," Upgrade to Grpc 1.42.1")),(0,i.kt)("h3",{id:"details-1"},"Details"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/issues?q=+label%3Arelease%2F4.14.4"},"https://github.com/apache/bookkeeper/issues?q=+label%3Arelease%2F4.14.4")),(0,i.kt)("h2",{id:"4143"},"4.14.3"),(0,i.kt)("p",null,"Release 4.14.3 includes multiple stability, performance, and security fixes along with the fix for Prometheus metrics."),(0,i.kt)("p",null,"Apache BookKeeper users are encouraged to upgrade to 4.14.3.\nThe technical details of this release are summarized below."),(0,i.kt)("h3",{id:"highlights-2"},"Highlights"),(0,i.kt)("h4",{id:"improvements-2"},"Improvements"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2768]"," Add metrics and internal command for AutoRecovery"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2788]"," Fix npe when pulsar ZkBookieRackAffinityMapping getBookieAddressResolver"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2794]"," Heap memory leak problem when ledger replication failed"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2802]"," Add auditor get ledger throttle to avoid auto recovery zk session expire"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2813]"," Add ensemble check to over-replicated ledger GC"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2832]"," Fix semaphore leak when EntryMemTable#addEntry accepts the same entries"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2833]"," Eliminate direct ZK access in ScanAndCompareGarbageCollector"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2842]"," Remove direct ZK access for Auditor"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2844]"," Add error handling to readLedgerMetadata in over-replicated ledger GC"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2845]"," A empty implmentation of newLedgerAuditorManager in EtcdLedgerManagerFactory to fix build")),(0,i.kt)("h4",{id:"dependency-updates-1"},"Dependency updates"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2792]"," Upgraded dependencies with CVEs"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2793]"," Upgrade httpclient from 4.5.5 to 4.5.13 to address CVE-2020-13956"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2811]"," Upgrade Netty to 4.1.68.Final")),(0,i.kt)("h3",{id:"details-2"},"Details"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/issues?q=+label%3Arelease%2F4.14.3"},"https://github.com/apache/bookkeeper/issues?q=+label%3Arelease%2F4.14.3")),(0,i.kt)("h2",{id:"4142"},"4.14.2"),(0,i.kt)("p",null,"Release 4.14.2 fixes an issue with Prometheus metrics that was\nfound in 4.14.0."),(0,i.kt)("p",null,"Apache BookKeeper users are encouraged to upgrade to 4.14.2.\nThe technical details of this release are summarized below."),(0,i.kt)("h4",{id:"bugs"},"Bugs"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"[https://github.com/apache/bookkeeper/pull/2740]"," Fix Bouncy Castle fips incompatible issue"),(0,i.kt)("p",{parentName:"li"},"In #2631, the default BouncyCastle was changed from non-fips into fips version. But the default version of BouncyCastle in Pulsar is the non-fips one(aimed to make it compatible with the old version of Pulsar)."),(0,i.kt)("p",{parentName:"li"},"Bouncy Castle provides both FIPS and non-FIPS versions, but in a JVM, it can not include both of the 2 versions(non-Fips and Fips), and we have to exclude the current version before including the other. This makes the backward compatible a little hard, and that's why Pulsar has to involve an individual module for Bouncy Castle.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"[https://github.com/apache/bookkeeper/pull/2762]"," Upgrade libthrift to 0.14.2 to address multiple CVEs"),(0,i.kt)("p",{parentName:"li"},"The current libthrift version 0.12.0 has multiple vulnerabilities: CVE-2019-0205 , CVE-2019-0210 , CVE-2020-13949")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"[https://github.com/apache/bookkeeper/pull/2735]"," Exclude grpc-okhttp dependency"),(0,i.kt)("p",{parentName:"li"},"The okhttp dependency version 2.7.4 is old and vulnerable. This dependency isn't needed and it causes Bookkeeper to be flagged for security vulnerabilities.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"[https://github.com/apache/bookkeeper/pull/2734]"," Upgrade Freebuilder version and fix the dependency"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Freebuilder 1.14.9 contains an outdate jquery js file which causes the library to be flagged as vulnerable with the highest threat level in Sonatype IQ vulnerability scanner. This also flags Bookkeeper as vulnerable with the highest threat level although it is a false positive and not an actual threat.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Freebuilder shouldn't be exposed as a transitive dependency"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"it's an annotation processor which should be defined",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/inferred/FreeBuilder#maven"},"optional in maven")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/inferred/FreeBuilder#gradle"},"compileOnly in gradle")))))))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"[https://github.com/apache/bookkeeper/pull/2693]"," Upgrade vertx to 3.9.8, addresses CVE-2018-12541"),(0,i.kt)("p",{parentName:"li"},"The current vertx version is 3.5.3 which has a vulnerability, CVE-2018-12541 ."))),(0,i.kt)("h3",{id:"details-3"},"Details"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/issues?q=+label%3Arelease%2F4.14.2"},"https://github.com/apache/bookkeeper/issues?q=+label%3Arelease%2F4.14.2")),(0,i.kt)("h2",{id:"4141"},"4.14.1"),(0,i.kt)("p",null,"Release 4.14.1 fixes an issue with Prometheus metrics that was\nfound in 4.14.0."),(0,i.kt)("p",null,"Apache BookKeeper users are encouraged to upgrade to 4.14.1.\nThe technical details of this release are summarized below."),(0,i.kt)("h4",{id:"bugs-1"},"Bugs"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"[https://github.com/apache/bookkeeper/pull/2718]"," Fix prometheus metric provider bug and add test to cover label scope"),(0,i.kt)("p",{parentName:"li"},"After add label for prometheus metric by #2650, it will cause prometheus metric format check failed when no label specified for a statsLogger. The metric list as follow."))),(0,i.kt)("h3",{id:"details-4"},"Details"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/issues?q=+label%3Arelease%2F4.14.1"},"https://github.com/apache/bookkeeper/issues?q=+label%3Arelease%2F4.14.1")),(0,i.kt)("h2",{id:"4140"},"4.14.0"),(0,i.kt)("p",null,"Release 4.14 adds FIPS compliance, improves compaction logic and the Stream Storage,\nimproves data reliability in the recovery scenarios,\nfixes multiple bugs and brings critical dependencies up-to-date."),(0,i.kt)("p",null,"Apache BookKeeper users are encouraged to upgrade to 4.14.0.\nThe technical details of this release are summarized below."),(0,i.kt)("h3",{id:"highlights-3"},"Highlights"),(0,i.kt)("h4",{id:"bookkeeper-is-fips-compliant-by-default-now"},"Bookkeeper is FIPS compliant by default now"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"[https://github.com/apache/bookkeeper/pull/2631]"," Make Bookkeeper FIPS compliant by default"),(0,i.kt)("p",{parentName:"li"},"FIPS is 'Federal Information Processing Standard'.\nIt's a set of guidelines for security functions such as encryption/decryption/RNG etc.\nApplications running in FIPS mode are said to be more secure as they adhere to more stringent standards."))),(0,i.kt)("h4",{id:"data-reliability"},"Data reliability"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2616]"," Add fencing to recovery reads to avoid data loss issue")),(0,i.kt)("h4",{id:"table-service-stream-storage-reliability-improvements"},"Table Service (stream storage) reliability improvements"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2686]"," Improved handling of RocksDB tombstones"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2641]"," Checksum validation for SST files"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2635]"," Better handling of corrupted checkpoints"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2643]"," Adjusted default rocksDbBlockCache size to 10%/numberOfLedgers of direct memory"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2698]"," RocksDB log path is configurable now")),(0,i.kt)("h4",{id:"compaction-logic-improvements"},"Compaction logic improvements"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2675]"," forceAllowCompaction to run only when force is set or configured interval"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2670]"," Allow a customer to set a limit on the duration of the major and minor compaction runs"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2645]"," Fix: The compaction status report is off by 1"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2626]"," Allow force compact entry log when entry log compaction is disabled"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2627]"," Allow DBLedgerStorage to force GC by disk listener")),(0,i.kt)("h4",{id:"dependency-updates-2"},"Dependency updates"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2696]"," SECURITY: Upgraded Netty to 4.1.63.Final"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2701]"," SECURITY: Removed jackson-mapper-asl dependency to resolve multiple CVEs"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2697]"," Upgraded Lombok to 1.18.20 (required for Java 16 support)"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2686]"," Upgraded rocksdb to 6.16.4")),(0,i.kt)("h4",{id:"other-improvements-and-fixes"},"Other improvements and fixes"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2658]"," Fix: always select the same region set bug for RegionAwareEnsemblePlacementPolicy"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2650]"," Allow to attach labels to metrics"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2401]"," Allow to bypass journal for writes"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2710]"," Imposed a memory limit on the bookie journal"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2664]"," Bookkeeper client throttling logic is based upon entryId instead of ledgerId"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2694]"," Performance: unnecessary copy to heap from CompositeByteBuf"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2654]"," Ensure that only entries of the current ensemble are included in the ledger recovery process"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2646]"," Auto-throttle read operations"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2647]"," Limit read-ahead bytes to the size of the read cache"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2632]"," Fixed NetworkTopologyImpl#getLeaves returning set with null value in case of non existing scope")),(0,i.kt)("h4",{id:"other"},"Other"),(0,i.kt)("p",null,"Documentation, build, CI, tests improvements"),(0,i.kt)("h3",{id:"details-5"},"Details"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/issues?q=+label%3Arelease%2F4.14.0"},"https://github.com/apache/bookkeeper/issues?q=+label%3Arelease%2F4.14.0")),(0,i.kt)("h2",{id:"4130"},"4.13.0"),(0,i.kt)("p",null,"Release 4.13 improves reliability of the Stream Storage,\nbrings additional configuration options for the Stream Storage and Prometheus HTTP Server,\nfixes multiple bugs and brings critical dependencies up-to-date."),(0,i.kt)("p",null,"Apache BookKeeper users are encouraged to upgrade to 4.13.0. The technical details of this release are summarized\nbelow."),(0,i.kt)("h3",{id:"highlights-4"},"Highlights"),(0,i.kt)("h4",{id:"table-service-stream-storage-reliability-improvements-1"},"Table Service (stream storage) reliability improvements"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/pulsar/pull/9481]"," Rocksdb DLCheckpoint SST file corruption in statestore"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2564]"," Fix SST file corruption"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2566]"," Handling checkpoint corruption in case of bookie crash"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/issues/2567]"," Save latest revision information in statestore"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2568]"," Save last revision in rocksdb")),(0,i.kt)("h4",{id:"other-improvements"},"Other improvements"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2560]"," Allow stream storage to use hostname instead of IP address"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2597]"," Skip unavailable bookies during verifyLedgerFragment"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2543]"," Allow to configure Prometheus HTTP Server bind address"),(0,i.kt)("li",{parentName:"ul"},"various fixes of the tests, documentation, etc.")),(0,i.kt)("h4",{id:"dependency-updates-3"},"Dependency updates"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2580]"," Upgrade protobuf to 3.14.0"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2582]"," Upgrading GRPC version to 1.33, Netty to 4.1.50Final and ETCD client driver"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2602]"," Upgrading dropwizard to 3.2.5")),(0,i.kt)("h3",{id:"details-6"},"Details"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/issues?q=+label%3Arelease%2F4.13.0"},"https://github.com/apache/bookkeeper/issues?q=+label%3Arelease%2F4.13.0")),(0,i.kt)("h2",{id:"4121"},"4.12.1"),(0,i.kt)("p",null,"This is the 24th release of Apache BookKeeper, it contains a few bugfixes, new features and dependency upgrades"),(0,i.kt)("p",null,"Apache BookKeeper users are encouraged to ",(0,i.kt)("a",{parentName:"p",href:"docs/admin/upgrade"},"upgrade to 4.12.1"),". The technical details of this release are summarized\nbelow."),(0,i.kt)("h3",{id:"news-and-noteworthy"},"News and noteworthy"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2519]"," Allow DNSToSwitchMapping to access BookieAddressResolver"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2493]"," Opportunistic Striping"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2398]"," getBookieInfo is stuck if no bookie is up"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2491]"," Upgrade to Curator 5.1"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2523]"," Update jcommander from 1.48 to 1.78")),(0,i.kt)("h3",{id:"details-7"},"Details"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/issues?q=+label%3Arelease%2F4.12.1+"},"https://github.com/apache/bookkeeper/issues?q=+label%3Arelease%2F4.12.1+")),(0,i.kt)("h2",{id:"4120"},"4.12.0"),(0,i.kt)("p",null,"This is the 23rd release of Apache BookKeeper, it is a great milestone for the project, and we are introducing a few breaking changes on the API.\nThere are not changes on the wire protocol, on metadata and on persisted data on disks by default, so the new version is totally compatible with the previous ones.\nWith BookKeeper 4.12.0 we are making a step toward better deployment on environments with dynamic network addresses with BP-41.\nWe are also enhancing the new Client API by adding features that were still missing, like the ability of queryng for ledger metadata."),(0,i.kt)("p",null,"Apache BookKeeper users are encouraged to ",(0,i.kt)("a",{parentName:"p",href:"docs/admin/upgrade"},"upgrade to 4.12.0"),". The technical details of this release are summarized\nbelow."),(0,i.kt)("h3",{id:"news-and-noteworthy-1"},"News and noteworthy"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/1901]"," Enable ExplicitLAC but default on the reader side and in the New org.apache.bookkeeper.client.api.ReadHandle API"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/issues/2396]"," BP-41 Bookie Network Address Change Tracking + BookieId"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/issues/2422]"," BP-42 List and Access LedgerMetadata on the new API"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2433]"," Support Java 11 and switch to Java 11 default Docker images"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2455]"," BP-40 clean up output for tools"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2429]"," Certificate role based authorization ")),(0,i.kt)("h3",{id:"details-8"},"Details"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/issues?q=+label%3Arelease%2F4.12.0+"},"https://github.com/apache/bookkeeper/issues?q=+label%3Arelease%2F4.12.0+")),(0,i.kt)("h2",{id:"4111"},"4.11.1"),(0,i.kt)("p",null,"Apache BookKeeper users are encouraged to upgrade to 4.11.1. The technical details of this release are summarized\nbelow."),(0,i.kt)("h3",{id:"highlights-5"},"Highlights"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Upgrade Netty,Vertx and RocksDB"),(0,i.kt)("li",{parentName:"ul"},"Better error reporting in case of ZooKeeper related errors"),(0,i.kt)("li",{parentName:"ul"},"Fix error that prevents Garbage Collections in case of corrupted EntryLogger file"),(0,i.kt)("li",{parentName:"ul"},"Support for Apache ZooKeeper 3.6.x")),(0,i.kt)("h4",{id:"changes"},"Changes"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"[https://github.com/apache/bookkeeper/pull/2410]"," Upgrade the ",(0,i.kt)("inlineCode",{parentName:"p"},"vertx")," version to 3.5.3")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"[https://github.com/apache/bookkeeper/pull/2390]"," Issue #2385: NullPointerException in Zookeeper multiple operations execution with 3.6.1")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"[https://github.com/apache/bookkeeper/pull/2389]"," Issue #2197: bkctl binary distribution needs a 'logs' directory")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"[https://github.com/apache/bookkeeper/pull/2384]"," Track ZooKeeper errors as causes of ZKException")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"[https://github.com/apache/bookkeeper/pull/2383]"," fix fillReadAheadCache stat bug")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"[https://github.com/apache/bookkeeper/pull/2381]"," The latency of BenchThroughputLatency may be wrong due to Integer overflow when we do a large scale benchmark test")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"[https://github.com/apache/bookkeeper/pull/2380]"," NP check for print BookieSocketAddress and a better format")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"[https://github.com/apache/bookkeeper/pull/2379]"," Updated netty,netty-boringssl and rocksdb")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"[https://github.com/apache/bookkeeper/pull/2373]"," Issue 2264: Bookie cannot perform Garbage Collection in case of corrupted EntryLogger file")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"[https://github.com/apache/bookkeeper/pull/2327]"," Bookie Client add quarantine ratio when error count exceed threshold")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"[https://github.com/apache/bookkeeper/pull/2415]"," Spammy log when one bookie of ensemble is down"))),(0,i.kt)("h3",{id:"compatiblity"},"Compatiblity"),(0,i.kt)("p",null,"This is a point release and it does not bring API changes."),(0,i.kt)("h3",{id:"full-list-of-changes"},"Full list of changes"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/issues?q=label%3Arelease%2F4.11.1+is%3Aclosed"},"https://github.com/apache/bookkeeper/issues?q=label%3Arelease%2F4.11.1+is%3Aclosed"))),(0,i.kt)("h2",{id:"4110"},"4.11.0"),(0,i.kt)("p",null,"This is the 21th release of Apache BookKeeper!"),(0,i.kt)("p",null,"The 4.11.0 release incorporates hundreds of bug fixes, improvements, and features since previous major release, 4.10.0."),(0,i.kt)("p",null,"Apache BookKeeper/DistributedLog users are encouraged to ",(0,i.kt)("a",{parentName:"p",href:"docs/admin/upgrade"},"upgrade to 4.11.0"),". The technical details of\nthis release are summarized below."),(0,i.kt)("h3",{id:"news-and-noteworthy-2"},"News and noteworthy"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Upgraded ZooKeeper version from ",(0,i.kt)("inlineCode",{parentName:"li"},"3.4.13")," to ",(0,i.kt)("inlineCode",{parentName:"li"},"3.5.7")," with #2112"),(0,i.kt)("li",{parentName:"ul"},"BookKeeper-server depends on ",(0,i.kt)("inlineCode",{parentName:"li"},"org.apache.httpcomponents-httpcore-4.4.9")," with #2156")),(0,i.kt)("h4",{id:"changes-1"},"Changes"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2338]"," Fix bookie port conflict when using LocalBookKeeper"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2333]"," Handle QuorumCoverage should only count unknown nodes"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2326]"," Update jackson version 2.11.0"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2314]"," BP-38: Publish Bookie Service Info including all advertised addresses on Metadata Service and it is backward compatible"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2313]"," add REST API to manage auto-recovery"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2312]"," Support metadata decoding for list-ledger api"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2300]"," files: Fix TLS with with v2 protocol"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2297]"," Update Arquillian Cube to 1.18.2"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2291]"," Update Prometheus library to 0.8.1"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2205]"," Handle empty ledger segmant while replica-check"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2156]"," Add Hostname verification for bookie-mTLS"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2112]"," Update ZooKeeper dependency to 3.5.7")),(0,i.kt)("h3",{id:"full-list-of-changes-1"},"Full list of changes"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/milestone/6?closed=1"},"https://github.com/apache/bookkeeper/milestone/7"))),(0,i.kt)("h2",{id:"4100"},"4.10.0"),(0,i.kt)("p",null,"This is the 20th release of Apache BookKeeper!"),(0,i.kt)("p",null,"The 4.10.0 release incorporates hundreds of bug fixes, improvements, and features since previous major release, 4.9.0."),(0,i.kt)("p",null,"Apache BookKeeper/DistributedLog users are encouraged to ",(0,i.kt)("a",{parentName:"p",href:"docs/admin/upgrade"},"upgrade to 4.10.0"),". The technical details of\nthis release are summarized below."),(0,i.kt)("h3",{id:"news-and-noteworthy-3"},"News and noteworthy"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2069]"," Use pure python implementation of MurmurHash"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/1934]"," Bump Netty and GRPC version"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/1907]"," Add new ",(0,i.kt)("em",{parentName:"li"},"bkctl")," shell tool"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/issues/1602]"," Cluster Metadata Checker"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2154]"," Auto refresh TLS certificate at bookie-server"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2150]"," Improve journal throughput when journalSyncData is disabled."),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2147]"," Journal should respect to ",(0,i.kt)("inlineCode",{parentName:"li"},"flushWhenQueueEmpty")," setting"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2132]"," Make default Bookie scripts work on JDK11+"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2128]"," Allow to override default SASL service name 'bookkeeper'"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2117]"," BookKeeper Admin API: Implement a method to get all the Bookies"),(0,i.kt)("li",{parentName:"ul"},"[https://github.com/apache/bookkeeper/pull/2111]"," Ensure getStickyReadBookieIndex returns valid bookie index")),(0,i.kt)("h3",{id:"full-list-of-changes-2"},"Full list of changes"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/milestone/6?closed=1"},"https://github.com/apache/bookkeeper/milestone/6"))),(0,i.kt)("h2",{id:"492"},"4.9.2"),(0,i.kt)("p",null,"This is the 18th release of Apache BookKeeper!"),(0,i.kt)("p",null,"The 4.9.2 release incorporates a few critical bug fixes, since previous major release, 4.9.0."),(0,i.kt)("p",null,"Apache BookKeeper/DistributedLog users are encouraged to ",(0,i.kt)("a",{parentName:"p",href:"docs/admin/upgrade"},"upgrade to 4.9.2"),". The technical details of\nthis release are summarized below."),(0,i.kt)("h4",{id:"dependencies-changes-1"},"Dependencies Changes"),(0,i.kt)("p",null,"No dependency change."),(0,i.kt)("h4",{id:"bug-fixes"},"Bug Fixes"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/1973"},"Issue #1973: [DLOG] Avoid double read in readahead")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/1952"},"Issue #1952: Filter empty string for networkTopologyScriptFileName")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/1950"},"Issue #1950: putEntryOffset translate FileInfoDeletedException"))),(0,i.kt)("h3",{id:"full-list-of-changes-3"},"Full list of changes"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/issues?q=label%3Arelease%2F4.9.1+is%3Aclosed"},"https://github.com/apache/bookkeeper/issues?q=label%3Arelease%2F4.9.2+is%3Aclosed"))),(0,i.kt)("h2",{id:"491"},"4.9.1"),(0,i.kt)("p",null,"This is the 18th release of Apache BookKeeper!"),(0,i.kt)("p",null,"The 4.9.1 release incorporates a few critical bug fixes, since previous major release, 4.9.0."),(0,i.kt)("p",null,"Apache BookKeeper/DistributedLog users are encouraged to ",(0,i.kt)("a",{parentName:"p",href:"docs/admin/upgrade"},"upgrade to 4.9.1"),". The technical details of\nthis release are summarized below."),(0,i.kt)("h4",{id:"dependencies-changes-2"},"Dependencies Changes"),(0,i.kt)("p",null,"No dependency change."),(0,i.kt)("h4",{id:"bug-fixes-1"},"Bug Fixes"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/1973"},"Issue #1973: [DLOG] Avoid double read in readahead")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/1952"},"Issue #1952: Filter empty string for networkTopologyScriptFileName")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/1950"},"Issue #1950: putEntryOffset translate FileInfoDeletedException"))),(0,i.kt)("h3",{id:"full-list-of-changes-4"},"Full list of changes"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/issues?q=label%3Arelease%2F4.9.1+is%3Aclosed"},"https://github.com/apache/bookkeeper/issues?q=label%3Arelease%2F4.9.1+is%3Aclosed"))),(0,i.kt)("h2",{id:"490"},"4.9.0"),(0,i.kt)("p",null,"This is the 16th release of Apache BookKeeper!"),(0,i.kt)("p",null,"The 4.9.0 release incorporates hundreds of bug fixes, improvements, and features since previous major release, 4.8.0,\nwhich was released four months ago. It is a new milestone in Apache BookKeeper community."),(0,i.kt)("p",null,"Apache BookKeeper/DistributedLog users are encouraged to ",(0,i.kt)("a",{parentName:"p",href:"docs/admin/upgrade"},"upgrade to 4.9.0"),". The technical details of\nthis release are summarized below."),(0,i.kt)("h3",{id:"highlights-6"},"Highlights"),(0,i.kt)("p",null,"The main features in 4.9.0 cover are around following areas:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Dependencies Changes"),(0,i.kt)("li",{parentName:"ul"},"Public API"),(0,i.kt)("li",{parentName:"ul"},"Configuration"),(0,i.kt)("li",{parentName:"ul"},"Metadata"),(0,i.kt)("li",{parentName:"ul"},"Table Service"),(0,i.kt)("li",{parentName:"ul"},"Operations"),(0,i.kt)("li",{parentName:"ul"},"Builds & Testing"),(0,i.kt)("li",{parentName:"ul"},"Enhancements"),(0,i.kt)("li",{parentName:"ul"},"Bug Fixes")),(0,i.kt)("h4",{id:"dependencies-changes-3"},"Dependencies Changes"),(0,i.kt)("p",null,"Here is a list of dependencies changed in 4.9.0:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Upgrade ",(0,i.kt)("a",{parentName:"li",href:"http://fasterxml.com/"},"Jackson")," from ",(0,i.kt)("inlineCode",{parentName:"li"},"2.8.9")," to ",(0,i.kt)("inlineCode",{parentName:"li"},"2.9.7"),"."),(0,i.kt)("li",{parentName:"ul"},"Upgrade ",(0,i.kt)("a",{parentName:"li",href:"https://jline.github.io/"},"Jline")," to ",(0,i.kt)("inlineCode",{parentName:"li"},"2.11"),"."),(0,i.kt)("li",{parentName:"ul"},"Upgrade ",(0,i.kt)("a",{parentName:"li",href:"https://netty.io/"},"Netty")," from ",(0,i.kt)("inlineCode",{parentName:"li"},"4.1.22")," to ",(0,i.kt)("inlineCode",{parentName:"li"},"4.1.31"),"."),(0,i.kt)("li",{parentName:"ul"},"Upgrade ",(0,i.kt)("a",{parentName:"li",href:"https://www.testcontainers.org/"},"TestContainers")," from ",(0,i.kt)("inlineCode",{parentName:"li"},"1.7.0")," to ",(0,i.kt)("inlineCode",{parentName:"li"},"1.8.3"),".")),(0,i.kt)("h4",{id:"public-api"},"Public API"),(0,i.kt)("p",null,"There are multiple new client features introduced in 4.9.0. Here are two highlighted features:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"LedgerHandleAdv exposes ",(0,i.kt)("inlineCode",{parentName:"li"},"asyncAddEntry")," variant that takes ByteBuf")),(0,i.kt)("h4",{id:"configuration-1"},"Configuration"),(0,i.kt)("p",null,"There are bunch of new settings introduced in both bookie and client in 4.9.0. Here are those settings:"),(0,i.kt)("h5",{id:"bookie"},"Bookie"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"serverNumIOThreads"),": configures the number of IO threads for bookies\n(see ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/1612"},"#1612"),")"),(0,i.kt)("li",{parentName:"ul"},"The default value of ",(0,i.kt)("inlineCode",{parentName:"li"},"fileInfoFormatVersionToWrite")," is bumped from ",(0,i.kt)("inlineCode",{parentName:"li"},"0")," to ",(0,i.kt)("inlineCode",{parentName:"li"},"1"),".\n(see ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/1689"},"#1689"),")"),(0,i.kt)("li",{parentName:"ul"},"The default value of ",(0,i.kt)("inlineCode",{parentName:"li"},"journalFormatVersionToWrite")," is bumped from ",(0,i.kt)("inlineCode",{parentName:"li"},"5")," to ",(0,i.kt)("inlineCode",{parentName:"li"},"6"),".\n(see ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/1689"},"#1689"),")")),(0,i.kt)("h5",{id:"client"},"Client"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"numIOThreads"),": configures the number of IO threads for client\n(see ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/1612"},"#1612"),")")),(0,i.kt)("h4",{id:"metadata"},"Metadata"),(0,i.kt)("p",null,"There are a few big changes around metadata in 4.9.0. They are:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Refactor ledger metadata in LedgerHandle to make ledger metadata instance immutable (see ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/issues/281"},"#281"),")"),(0,i.kt)("li",{parentName:"ul"},"Store ledger metadata in binary protobuf format (see details at ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/issues/723"},"#723"),")"),(0,i.kt)("li",{parentName:"ul"},"Etcd based metadata driver implementation is in BETA release (see details at ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/issues/1639"},"#1639"),")")),(0,i.kt)("p",null,"Additionally, there are bunch of new interfaces introduced in the metadata driver API."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/1619"},"Issue #1619: Provide async version of markLedgerUnderreplicated for LedgerUnderreplicationManager"))),(0,i.kt)("h4",{id:"table-service"},"Table Service"),(0,i.kt)("p",null,"There are a lot of improvements and features introduced into the table service. The maturity of table service is moving from alpha to beta,\nand has started to be used as the state storage for Pulsar Functions. More table service usage will come in Pulsar's future releases."),(0,i.kt)("p",null,"Starting from 4.9.0, bookkeeper will release a python client for table service. See details at ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/pull/1691"},"#1691")),(0,i.kt)("h4",{id:"operations"},"Operations"),(0,i.kt)("h5",{id:"http-admin-rest-endpoint"},"HTTP Admin REST Endpoint"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"/api/v1/bookie/gc_details")," is introduced to retrieve the GC details."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"/api/v1/bookie/gc")," is introduced to trigger GC through HTTP REST endpoint.")),(0,i.kt)("h5",{id:"bookieshell"},"BookieShell"),(0,i.kt)("p",null,"There are are multiple new commands are added in BookieShell. Here are a few highlighted:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"regenerate-interleaved-storage-index-file")," command is introduced for rebuilding the index files for interleaved based ledger storage. (",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/1642"},"#1642"),")"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"ledgermetadata")," command now supports dumping/restoring ledger metadata to/from file."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"localconsistencycheck")," command is introduce for running consistency check on bookies locally. (",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/1819"},"#1819"),")"),(0,i.kt)("li",{parentName:"ul"},"a new ",(0,i.kt)("inlineCode",{parentName:"li"},"bk-perf")," script is introduced for running performance benchmark on bookkeeper. (",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/1697"},"1697"),")")),(0,i.kt)("p",null,"A new BookKeeper CLI package is released as ",(0,i.kt)("inlineCode",{parentName:"p"},"bkctl"),". This ",(0,i.kt)("inlineCode",{parentName:"p"},"bkctl")," package includes both the existing bookie shell and the new ",(0,i.kt)("inlineCode",{parentName:"p"},"bkctl")," tool."),(0,i.kt)("h5",{id:"mdc"},"MDC"),(0,i.kt)("p",null,"Mapped Diagnostic Context (MDC) is now supported at both bookie and client sides. Application request context can be passed as context\nand being logged through slf4j/log4j. This simplifies throubleshooting of request-level failures/errors. See details at ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/pull/1672"},"#1672"),"."),(0,i.kt)("h5",{id:"stats-annotation"},"Stats Annotation"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"StatsDoc")," annotation is introduced in ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/pull/1786"},"BP-36"),". The ",(0,i.kt)("inlineCode",{parentName:"p"},"StatsDoc")," annotation is\nused for documenting stats added across the project."),(0,i.kt)("h4",{id:"builds--testing"},"Builds & Testing"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Java 11 is supported for building bookkeeper.")),(0,i.kt)("h4",{id:"enhancements"},"Enhancements"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/1792"},"Issue 1791: Read Submission should bypass OSE Threads")),(0,i.kt)("li",{parentName:"ul"},"A new module is introduced for enabling CPU affinity ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/1641"},"#1641")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/1682"},"Issue 1682: Added BlockingQueue implementation based on JCtools")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/1813"},"Issue 1813: Set default sizes of DbLedgerStorage read and write cache to be proportional to JVM direct memory")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/1808"},"Issue 1808: Allow to configure sticky reads")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/1754"},"Issue 1754: Netty allocator wrapper"))),(0,i.kt)("h4",{id:"bug-fixes-2"},"Bug Fixes"),(0,i.kt)("h5",{id:"bookie-1"},"Bookie"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/1414"},"Issue #1414: Ensure BufferedChannel instance is properly closed")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/1805"},"Issue #1805: Fixed Auth with V2 protocol")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/1769"},"Issue #1769: prevent race between flush and delete from recreating index")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/1807"},"Issue #1807: Fix sorted ledger storage rotating entry log files too frequent")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/1843"},"Issue #1843: DbLedgerStorage should do periodical flush"))),(0,i.kt)("h5",{id:"autorecovery"},"AutoRecovery"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/1608"},"Issue #1578: Fixed deadlock in auditor blocking ZK thread")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/1834"},"Issue #1834: Only publish suspect ledgers if they have missing fragments"))),(0,i.kt)("h5",{id:"client-1"},"Client"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/1762"},"Issue #1762: Don't cache Bookie hostname DNS resolution forever")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/1788"},"Issue #1788: Fix bugs in DefaultEnsemblePlacementPolicy")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/1862"},"Issue #1862: Fix selectFromNetworkLocation in RackawareEnsemblePlacementPolicyImpl")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/1857"},"Issue #1857: changingEnsemble should be negated before calling unset success"))),(0,i.kt)("h3",{id:"full-list-of-changes-5"},"Full list of changes"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/milestone/5?closed=1"},"https://github.com/apache/bookkeeper/milestone/5"))),(0,i.kt)("h2",{id:"482"},"4.8.2"),(0,i.kt)("p",null,"This is the 17th release of Apache BookKeeper!"),(0,i.kt)("p",null,"The 4.8.2 release is a bugfix release which fixes a bunch of issues reported from users of 4.8.1."),(0,i.kt)("p",null,"Apache BookKeeper users who are using 4.8.1 are encouraged to upgrade to 4.8.2. The technical details of this release are summarized\nbelow."),(0,i.kt)("h3",{id:"highlights-7"},"Highlights"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"[DLOG]"," Avoid double read in readahead, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/pull/1973"},"apache/bookkeeper#1973"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Small fix wrong nodesUninitialized count when checkCovered, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/pull/1900"},"apache/bookkeeper#1900"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Handle double bookie failures, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/pull/1886"},"apache/bookkeeper#1886"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"dir_","*","_usage stats are reported as 0, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/pull/1884"},"apache/bookkeeper#1884"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Fix selectFromNetworkLocation in RackawareEnsemblePlacementPolicyImpl, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/pull/1862"},"apache/bookkeeper#1862"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"DbLedgerStorage should do periodical flush, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/pull/1842"},"apache/bookkeeper#1842"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Add rest endpoint trigger_gc to trigger GC on Bookie, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/pull/1838"},"apache/bookkeeper#1838"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Fix sorted ledger storage rotating entry log files too frequent, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/pull/1807"},"apache/bookkeeper#1807"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Fixed Auth with v2 protocol, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/pull/1805"},"apache/bookkeeper#1805"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"[tools]"," add cookie related commands, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/pull/1794"},"apache/bookkeeper#1974"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"[tools]"," improve bkctl help message, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/pull/1793"},"apache/bookkeeper#1793"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Read Submission should bypass OSE Threads, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/pull/1791"},"apache/bookkeeper#1791"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Cache InetSocketAddress if hostname is IPAddress, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/pull/1789"},"apache/bookkeeper#1789"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Fix bugs in DefaultEnsemblePlacementPolicy, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/pull/1788"},"apache/bookkeeper#1788")))),(0,i.kt)("h4",{id:"dependency-changes"},"Dependency Changes"),(0,i.kt)("p",null,"There is no dependency upgrade from 4.8.1."),(0,i.kt)("h3",{id:"full-list-of-changes-6"},"Full list of changes"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/issues?q=label%3Arelease%2F4.8.2+is%3Aclosed"},"https://github.com/apache/bookkeeper/issues?q=label%3Arelease%2F4.8.2+is%3Aclosed"))),(0,i.kt)("h2",{id:"481"},"4.8.1"),(0,i.kt)("p",null,"This is the 14th release of Apache BookKeeper!"),(0,i.kt)("p",null,"The 4.8.1 release is a bugfix release which fixes a bunch of issues reported from users of 4.8.0."),(0,i.kt)("p",null,"Apache BookKeeper users who are using 4.8.0 are encouraged to upgrade to 4.8.1. The technical details of this release are summarized\nbelow."),(0,i.kt)("h3",{id:"highlights-8"},"Highlights"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Use default metrics registry in Prometheus exporter, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/pull/1765"},"apache/bookkeeper#1765"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Don't cache Bookie hostname DNS resolution forever, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/pull/1762"},"apache/bookkeeper#1762"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Reduce stack traces in logs for common cases, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/pull/1776"},"apache/bookkeeper#1762"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Ledger deletion racing with flush can cause a ledger index to be resurrected, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/pull/1757"},"apache/bookkeeper#1757"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"EntryMemTable.newEntry retains reference to passed ByteBuffer array, can cause corruption on journal replay, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/pull/1737"},"apache/bookkeeper#1737")))),(0,i.kt)("h4",{id:"dependency-changes-1"},"Dependency Changes"),(0,i.kt)("p",null,"There is no dependecy upgrade from 4.8.0."),(0,i.kt)("h3",{id:"full-list-of-changes-7"},"Full list of changes"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/issues?q=label%3Arelease%2F4.8.1+is%3Aclosed"},"https://github.com/apache/bookkeeper/issues?q=label%3Arelease%2F4.8.1+is%3Aclosed"))),(0,i.kt)("h2",{id:"480"},"4.8.0"),(0,i.kt)("p",null,"This is the 13th release of Apache BookKeeper!"),(0,i.kt)("p",null,"The 4.8.0 release incorporates hundreds of bug fixes, improvements, and features since previous major release, 4.7.0.\nIt is a new big milestone in Apache BookKeeper community,\nthis release include great new features, like Relaxed Durability, Stream Storage service and Multiple active Entrylogs."),(0,i.kt)("p",null,"Apache BookKeeper/DistributedLog users are encouraged to ",(0,i.kt)("a",{parentName:"p",href:"docs/admin/upgrade"},"upgrade to 4.8.0"),". The technical details of\nthis release are summarized below."),(0,i.kt)("h3",{id:"highlights-9"},"Highlights"),(0,i.kt)("p",null,"The main features in 4.8.0 are around following areas:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Durability"),(0,i.kt)("li",{parentName:"ul"},"ExplicitLAC feature"),(0,i.kt)("li",{parentName:"ul"},"New Table Storage Service"),(0,i.kt)("li",{parentName:"ul"},"Bug Fixes")),(0,i.kt)("h4",{id:"new-writeflag-deferred_sync"},"New WriteFlag DEFERRED_SYNC"),(0,i.kt)("p",null,"The writer may ask for temporary relaxed durability writes, that is to receive early acknowledge from Bookies, before an fsync() on Journal.\nTogether with this new flag we introduced the new WriteHandle#force() API, this this API the writer is able to request an explicit guarantee of durability to the Bookies\nit is mostly like and explicit fsync() on a file system."),(0,i.kt)("p",null,"See ",(0,i.kt)("a",{parentName:"p",href:"https://bookkeeper.apache.org//docs/latest/api/javadoc/javadoc/org/apache/bookkeeper/client/api/WriteFlag"},(0,i.kt)("inlineCode",{parentName:"a"},"DEFERRED_SYNC"))," and ",(0,i.kt)("a",{parentName:"p",href:"https://bookkeeper.apache.org//docs/latest/api/javadoc/javadoc/org/apache/bookkeeper/client/api/ForceableHandle"},"force()")," for reference"),(0,i.kt)("h4",{id:"new-behaviour-for-netty-bytebuf-reference-count-management"},"New behaviour for Netty ByteBuf reference count management"),(0,i.kt)("p",null,"All the client side APIs which take ByteBufs now will have the net effect of decrementing by 1 the refcount.\nThis is consistent with general contract of Netty.\nIt is expected that the client passes the ownership of the ByteBuf to BookKeeper client."),(0,i.kt)("h4",{id:"multiple-active-entrylogs"},"Multiple Active Entrylogs"),(0,i.kt)("p",null,"It is now possible on the Bookie to have multiple active entry loggers,\nthis new feature will help with compaction performance and some specific workloads."),(0,i.kt)("p",null,"See ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/issues/570"},"Multiple active entrylogs")),(0,i.kt)("h4",{id:"table-storage-service"},"Table Storage Service"),(0,i.kt)("p",null,"From this version we are providing the a table (key/value) service embedded in Bookies."),(0,i.kt)("p",null,"See ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/issues/1205"},"BP-30: BookKeeper Table Service")),(0,i.kt)("h4",{id:"make-explicitlac-persistent"},"Make ExplicitLAC persistent"),(0,i.kt)("p",null,"ExplicitLAC was contributed from Salesforce in 4.5.0 release, but in the first release\nit was a beft-effort in-memory mechanism. Now you can configure Bookies to store durably ExplicitLAC."),(0,i.kt)("p",null,"See ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/issues/1527"},"Make ExplicitLAC persistent")),(0,i.kt)("h4",{id:"ensemble-change-on-delayed-write-failure"},"Ensemble change on Delayed Write Failure"),(0,i.kt)("p",null,"We are handling more gracefully the case of a failure of a Bookie in spite of a succeeded write.\nIf you are writing with Ack Quorum = 2 and Write Quorum = 3, writes will succeeed even if 1 of 3 Bookies fail,\nnow BookKeeper will trigger an ",(0,i.kt)("em",{parentName:"p"},"ensemble change")," and replace the failed bookie earlier."),(0,i.kt)("p",null,"See ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/issues/1390"},"Ensemble change on Delayed Write Failure")),(0,i.kt)("h3",{id:"full-list-of-changes-8"},"Full list of changes"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/milestone/4?closed=1"},"https://github.com/apache/bookkeeper/milestone/4"))),(0,i.kt)("h2",{id:"473"},"4.7.3"),(0,i.kt)("p",null,"This is the 16th release of Apache BookKeeper!"),(0,i.kt)("p",null,"The 4.7.3 release is a bugfix release which fixes a bunch of issues reported from users of 4.7.2."),(0,i.kt)("p",null,"Apache BookKeeper users who are using 4.7.2 are encouraged to upgrade to 4.7.3. The technical details of this release are summarized\nbelow."),(0,i.kt)("h3",{id:"highlights-10"},"Highlights"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Cancel Scheduled SpeculativeReads, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/pull/1665"},"apache/bookkeeper#1665"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"IllegalReferenceCountException at closing EntryLogManagerForSingleEntryLog, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/issues/1703"},"apache/bookkeeper#1703"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"EntryMemTable.newEntry retains reference to passed ByteBuffer array can cause corruption on journal replay, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/issues/1737"},"apache/bookkeeper#1737"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Ledger deletion racing with flush can cause a ledger index to be resurrected, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/issues/1757"},"apache/bookkeeper#1757"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Don't cache Bookie hostname DNS resolution forever, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/pull/1762"},"apache/bookkeeper#1762"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Use default metric registry in Prometheus export, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/pull/1765"},"apache/bookkeeper#1765"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Fix Auth with v2 protocol, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/pull/1805"},"apache/bookkeeper#1805"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Remove MathUtils.now to address compaction scheduling deplay issues, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/pull/1837"},"apache/bookkeeper#1837"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"DbLedgerStorage should do periodical flush, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/pull/1843"},"apache/bookkeeper#1843")))),(0,i.kt)("h3",{id:"full-list-of-changes-9"},"Full list of changes"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/issues?q=label%3Arelease%2F4.7.3+is%3Aclosed"},"https://github.com/apache/bookkeeper/issues?q=label%3Arelease%2F4.7.3+is%3Aclosed"))),(0,i.kt)("h2",{id:"472"},"4.7.2"),(0,i.kt)("p",null,"This is the 12th release of Apache BookKeeper!"),(0,i.kt)("p",null,"The 4.7.2 release is a bugfix release which fixes a bunch of issues reported from users of 4.7.1."),(0,i.kt)("p",null,"Apache BookKeeper users who are using 4.7.1 are encouraged to upgrade to 4.7.2. The technical details of this release are summarized\nbelow."),(0,i.kt)("h3",{id:"highlights-11"},"Highlights"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Fix high cpu usage issue in DbLedgerStorage by avoiding using RocksDD#deleteRange, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/pull/1620"},"apache/bookkeeper#1620"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Fix deadlock in Auditor blocking zookeeper thread, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/pull/1619"},"apache/bookkeeper#1619"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Fix ArrayIndexOutOfBoundsException on ConcurrentLongHashMap, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/pull/1606"},"apache/bookkeeper#1606"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Fix deferred failure handling causes data loss, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/pull/1591"},"apache/bookkeeper#1591"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Fix ConcurrentModificationException using nonblocking logReader#readNext, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/pull/1544"},"apache/bookkeeper#1544"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Fix Bookie shutdown fails to exit, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/issues/1543"},"apache/bookkeeper#1543"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Fix race conditions on accessing guava multimap in PCBC when using v2 protocol, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/pull/1618"},"apache/bookkeeper#1618")))),(0,i.kt)("h4",{id:"dependency-changes-2"},"Dependency Changes"),(0,i.kt)("p",null,"In 4.7.2, ",(0,i.kt)("a",{parentName:"p",href:"https://zookeeper.apache.org/"},"Zookeeper")," version is downgraded from ",(0,i.kt)("inlineCode",{parentName:"p"},"3.5.3-beta")," to ",(0,i.kt)("inlineCode",{parentName:"p"},"3.4.13")," to avoid having a ",(0,i.kt)("inlineCode",{parentName:"p"},"beta")," dependency and address maturity concerns.\nThe downgrade is safe and smooth. No extra actions are required from switching bookkeeper 4.7.1 to 4.7.2."),(0,i.kt)("h3",{id:"full-list-of-changes-10"},"Full list of changes"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/issues?q=label%3Arelease%2F4.7.2+is%3Aclosed"},"https://github.com/apache/bookkeeper/issues?q=label%3Arelease%2F4.7.2+is%3Aclosed"))),(0,i.kt)("h2",{id:"471"},"4.7.1"),(0,i.kt)("p",null,"This is the eleventh release of Apache BookKeeper!"),(0,i.kt)("p",null,"The 4.7.1 release is a bugfix release which fixes a bunch of issues reported from users of 4.7.0."),(0,i.kt)("p",null,"Apache BookKeeper users who are using 4.7.0 are encouraged to upgrade to 4.7.1. The technical details of this release are summarized\nbelow."),(0,i.kt)("h3",{id:"highlights-12"},"Highlights"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Performance enhancement on eliminating bytes copying in ",(0,i.kt)("inlineCode",{parentName:"p"},"AddEntry")," code path, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/pull/1361"},"apache/bookkeeper#1361"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Introduce Fast and Garbage-Free Statistics Timers in Codahale Stats Provider, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/pull/1364"},"apache/bookkeeper#1364"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Fix OrderedScheduler handling null key, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/pull/1372"},"apache/bookkeeper#1372"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Fix zookeeper ledger manager on handling no ledger exists, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/pull/1382"},"apache/bookkeeper#1382"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Fix long poll reads when ensemble size is larger than write quorum size, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/pull/1404"},"apache/bookkeeper#1404"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Fix IllegalReferenceCount on filling readahead cache for DbLedgerStorage, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/issues/1487"},"apache/bookkeeper#1487"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Fix LedgerEntry recycling issue on long poll speculative reads, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/pull/1509"},"apache/bookkeeper#1509"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Various bug fixes and improvements around bookkeeper table service, see changes under ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/issues?utf8=%E2%9C%93&q=is%3Aclosed+label%3Aarea%2Ftableservice+label%3Arelease%2F4.7.1"},"apache/bookkeeper#release/4.7.1")))),(0,i.kt)("h4",{id:"dependencies-upgrade"},"Dependencies Upgrade"),(0,i.kt)("p",null,"Here is a list of dependencies changed in 4.7.1:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://grpc.io/"},"Grpc")," is upgraded from ",(0,i.kt)("inlineCode",{parentName:"li"},"1.5.0")," to ",(0,i.kt)("inlineCode",{parentName:"li"},"1.12.0"),". See ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/1441"},"apache/bookkeeper#1441")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"http://netty.io/"},"Netty")," is upgraded from ",(0,i.kt)("inlineCode",{parentName:"li"},"4.1.12")," to ",(0,i.kt)("inlineCode",{parentName:"li"},"4.1.22"),". See ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/1441"},"apache/bookkeeper#1441")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://developers.google.com/protocol-buffers/"},"Protobuf")," is upgraded from ",(0,i.kt)("inlineCode",{parentName:"li"},"3.4.0")," to ",(0,i.kt)("inlineCode",{parentName:"li"},"3.5.1"),". See ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/1466"},"apache/bookkeeper#1466")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"http://rocksdb.org/"},"RocksDB")," is upgraded from ",(0,i.kt)("inlineCode",{parentName:"li"},"5.8.6")," to ",(0,i.kt)("inlineCode",{parentName:"li"},"5.13.1"),". See ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/1466"},"apache/bookkeeper#1466"))),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"Reflective setAccessible(true)")," is disabled by default in Netty while using java9+. This might result in performance degradation. Consider reenabling ",(0,i.kt)("inlineCode",{parentName:"p"},"Reflective setAccessible(true)")," by setting\nenvironment value ",(0,i.kt)("inlineCode",{parentName:"p"},"io.netty.tryReflectionSetAccessible")," to ",(0,i.kt)("inlineCode",{parentName:"p"},"true"),". See ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/netty/netty/pull/7650"},"netty/netty#7650")," for more details."),(0,i.kt)("h3",{id:"full-list-of-changes-11"},"Full list of changes"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/issues?q=label%3Arelease%2F4.7.1+is%3Aclosed"},"https://github.com/apache/bookkeeper/issues?q=label%3Arelease%2F4.7.1+is%3Aclosed"))),(0,i.kt)("h2",{id:"470"},"4.7.0"),(0,i.kt)("p",null,"This is the tenth release of Apache BookKeeper!"),(0,i.kt)("p",null,"The 4.7.0 release incorporates hundreds of bug fixes, improvements, and features since previous major release, 4.6.0,\nwhich was released four months ago. It is a big milestone in Apache BookKeeper community - Yahoo branch is fully merged\nback to upstream, and Apache Pulsar (incubating) starts using official BookKeeper release for its upcoming 2.0 release."),(0,i.kt)("p",null,"It is also the first release of Apache DistributedLog after it is merged as sub modules of Apache BookKeeper."),(0,i.kt)("p",null,"Apache BookKeeper/DistributedLog users are encouraged to ",(0,i.kt)("a",{parentName:"p",href:"docs/admin/upgrade"},"upgrade to 4.7.0"),". The technical details of\nthis release are summarized below."),(0,i.kt)("h3",{id:"highlights-13"},"Highlights"),(0,i.kt)("p",null,"The main features in 4.7.0 cover are around following areas:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Dependencies Changes"),(0,i.kt)("li",{parentName:"ul"},"Public API"),(0,i.kt)("li",{parentName:"ul"},"Security"),(0,i.kt)("li",{parentName:"ul"},"DbLedgerStorage"),(0,i.kt)("li",{parentName:"ul"},"Metadata API"),(0,i.kt)("li",{parentName:"ul"},"Performance"),(0,i.kt)("li",{parentName:"ul"},"Operations"),(0,i.kt)("li",{parentName:"ul"},"Builds & Testing"),(0,i.kt)("li",{parentName:"ul"},"Bug Fixes")),(0,i.kt)("h4",{id:"dependencies-changes-4"},"Dependencies Changes"),(0,i.kt)("p",null,"Here is a list of dependencies changed in 4.7.0:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"http://jcommander.org/"},"JCommander")," 1.48 is added as a dependency of bookkeeper-server module."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"http://rocksdb.org/"},"RocksDB")," 5.8.6 is introduced as part of ",(0,i.kt)("inlineCode",{parentName:"li"},"DbLedgerStorage")," as a dependency of bookkeeper-server module."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://datasketches.github.io/"},"DataSketches")," 0.8.3 is introduced as a dependency of prometheus-metrics-provider module."),(0,i.kt)("li",{parentName:"ul"},"Upgrade ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/google/guava"},"Guava")," from ",(0,i.kt)("inlineCode",{parentName:"li"},"20.0")," to ",(0,i.kt)("inlineCode",{parentName:"li"},"21.0"),".")),(0,i.kt)("h4",{id:"public-api-1"},"Public API"),(0,i.kt)("p",null,"There are multiple new client features introduced in 4.7.0. Here are two highlighted features:"),(0,i.kt)("h5",{id:"fluent-api"},"Fluent API"),(0,i.kt)("p",null,"The new fluent style APi is evolving in 4.7.0. All the methods in handlers are now having both async and sync methods.\nSee ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/pull/1288"},"#1288")," for more details"),(0,i.kt)("h5",{id:"crc32c"},"CRC32C"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"circe-checksum")," module is ported from Apache Pulsar to Apache BookKeeper, and CRC32C digest type is added as one digest type option.\nThe JNI based CRC32C in ",(0,i.kt)("inlineCode",{parentName:"p"},"circe-checksum")," module provides excellent performance than existing CRC32 digest type. Users are encouraged\nto start use CRC32C digest type."),(0,i.kt)("h4",{id:"security"},"Security"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"New PEM format ",(0,i.kt)("inlineCode",{parentName:"li"},"X.509")," certificates are introduced for TLS authentication. See ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/965"},"#965")," for more details."),(0,i.kt)("li",{parentName:"ul"},"TLS related settings are converged into same settings as bookie server. See ",(0,i.kt)("a",{parentName:"li",href:"docs/admin/upgrade"},"Upgrade Guide")," for more details.")),(0,i.kt)("h4",{id:"dbledgerstorage"},"DbLedgerStorage"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"DbLedgerStorage")," is a new ledger storage that introduced by Yahoo and now fully merged into Apache BookKeeper. It is fully compatible for both v2 and v3\nprotocols and also support long polling. It uses ",(0,i.kt)("a",{parentName:"p",href:"http://rocksdb.org/"},"RocksDB")," to store ledger index, which eliminates the needed of ledger index files and\nreduces the number of open file descriptors and the amount of random IOs can occurs during flushing ledger index."),(0,i.kt)("h4",{id:"metadata-api"},"Metadata API"),(0,i.kt)("p",null,"New serviceUri based metadata API is introduced as ",(0,i.kt)("a",{parentName:"p",href:"http://bookkeeper.apache.org/bps/BP-29-metadata-store-api-module"},"BP-29"),". This metadata API provides the metadata\nabstraction over ledger manager, registration service, allowing plugin different type of data stores as the metadata service."),(0,i.kt)("h4",{id:"performance"},"Performance"),(0,i.kt)("p",null,"There are a lot for performance related bug fixes and improvements in 4.7.0. Some of the changes are highlighted as below:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Leverage netty object recycler to reduce object allocations"),(0,i.kt)("li",{parentName:"ul"},"A bunch of contentions around locking are removed. E.g. ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/1321"},"#1321")," ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/1292"},"#1292")," ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/1258"},"#1258")),(0,i.kt)("li",{parentName:"ul"},"Introduce priority thread pool for accepting high priority reads/writes. This allows high priority reads/writes such as ledger recovery operations can\nsucceed even bookies are overwhelmed. ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/898"},"#898")),(0,i.kt)("li",{parentName:"ul"},"Reorder slow bookies in read sequence. ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/883"},"#883")),(0,i.kt)("li",{parentName:"ul"},"Use atomic field updater and long adder to replace AtomicInteger/AtomicLong/AtomicReference in Dlog. ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/1299"},"#1299")),(0,i.kt)("li",{parentName:"ul"},"DataSketches library is used for implementing prometheus provider. ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/1245"},"#1245"))),(0,i.kt)("h4",{id:"operations-1"},"Operations"),(0,i.kt)("h4",{id:"bookieshell-1"},"BookieShell"),(0,i.kt)("p",null,"There are are multiple new commands are added in BookieShell. Here are a few highlighted:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"metaformat")," is deprecated with two new commands ",(0,i.kt)("inlineCode",{parentName:"li"},"initnewcluster")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"nukeexistingcluster"),". This separation provides better operability and reduces mistakes."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"initbookie")," command is introduced for initializing a new bookie. ",(0,i.kt)("inlineCode",{parentName:"li"},"bookieformat")," keeps serving as the purpose of reformatting a bookie.")),(0,i.kt)("p",null,"A new BookKeeper CLI is proposed in ",(0,i.kt)("a",{parentName:"p",href:"http://bookkeeper.apache.org/bps/BP-27-new-bookkeeper-cli"},"BP-27"),". Some commands are already ported to new bookkeeper CLI.\nThe full list of shell commands will be fully ported to new bookkeeper CLI in next release."),(0,i.kt)("h4",{id:"readonly-mode-support"},"ReadOnly Mode Support"),(0,i.kt)("p",null,"Operations are improved around readonly mode for handling bookkeeper outage situation. New settings are introduce allow entry log creation, high priority writes\neven when bookies are readonly. See ",(0,i.kt)("a",{parentName:"p",href:"docs/admin/upgrade"},"Upgrade Guide")," to learn all newly added settings."),(0,i.kt)("h4",{id:"builds--testing-1"},"Builds & Testing"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"http://arquillian.org/"},"Arquillian")," framework is introduced in 4.7.0 for backward compatibility and integration tests. "),(0,i.kt)("li",{parentName:"ul"},"Both Java8 and Java9 are now supported for running bookkeeper.")),(0,i.kt)("h3",{id:"full-list-of-changes-12"},"Full list of changes"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/milestone/3?closed=1"},"https://github.com/apache/bookkeeper/milestone/3"))),(0,i.kt)("h2",{id:"462"},"4.6.2"),(0,i.kt)("p",null,"This is the ninth release of BookKeeper as an Apache Top Level Project!"),(0,i.kt)("p",null,"The 4.6.2 release is a bugfix release which fixes a bunch of issues reported from users of 4.6.1."),(0,i.kt)("p",null,"Apache BookKeeper users are encouraged to upgrade to 4.6.2. The technical details of this release are summarized\nbelow."),(0,i.kt)("h3",{id:"highlights-14"},"Highlights"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Fix performance regression is using Netty > 4.1.12, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/pull/1108"},"https://github.com/apache/bookkeeper/pull/1108"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Enhance performances on Prometheus stats provider, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/pull/1081"},"https://github.com/apache/bookkeeper/pull/1081"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Save memory resources on client by retaining for less time references to data to write, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/issues/1063"},"https://github.com/apache/bookkeeper/issues/1063"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Fix a problem on Java 9/10 with the 'shaded' artifacts, due to a bug in Maven Shade Plugin, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/pull/1144"},"https://github.com/apache/bookkeeper/pull/1144"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Fix Journal stats names, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/pull/1250"},"https://github.com/apache/bookkeeper/pull/1250")))),(0,i.kt)("h4",{id:"dependencies-upgrade-1"},"Dependencies Upgrade"),(0,i.kt)("p",null,"There is no dependency upgrade since 4.6.0, and since 4.6.1 we distribute a 'shaded' version of main artifacts, see ",(0,i.kt)("a",{parentName:"p",href:"docs/4.6.2/api/ledger-api"},"Ledger API")),(0,i.kt)("h3",{id:"full-list-of-changes-13"},"Full list of changes"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/issues?utf8=%E2%9C%93&q=label%3Arelease%2F4.6.2+is%3Aclosed"},"https://github.com/apache/bookkeeper/issues?utf8=%E2%9C%93&q=label%3Arelease%2F4.6.2+is%3Aclosed"))),(0,i.kt)("h2",{id:"461"},"4.6.1"),(0,i.kt)("p",null,"This is the eighth release of BookKeeper as an Apache Top Level Project!"),(0,i.kt)("p",null,"The 4.6.1 release is a bugfix release which fixes a bunch of issues reported from users of 4.6.0."),(0,i.kt)("p",null,"Apache BookKeeper users are encouraged to upgrade to 4.6.1. The technical details of this release are summarized\nbelow."),(0,i.kt)("h3",{id:"highlights-15"},"Highlights"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Fix critical bug on index persistence manager, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/pull/913"},"https://github.com/apache/bookkeeper/pull/913"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Fix critical bug to allow using versions of Netty newer than 4.1.2 on classpath, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/pull/996"},"https://github.com/apache/bookkeeper/pull/996"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Enhance Java 9 compatibility, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/issues/326"},"https://github.com/apache/bookkeeper/issues/326"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"New option to track task execution time, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/issues/931"},"https://github.com/apache/bookkeeper/issues/931"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Distribute a version of BookKeeper which embeds and relocates Guava and Protobuf, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/issues/922"},"https://github.com/apache/bookkeeper/issues/922"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},'Add description for the new error code "Too many requests", see ',(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/pull/921"},"https://github.com/apache/bookkeeper/pull/921")))),(0,i.kt)("h4",{id:"dependencies-upgrade-2"},"Dependencies Upgrade"),(0,i.kt)("p",null,"There is no dependency upgrade since 4.6.0, but now we distribute a 'shaded' version of main artifacts, see ",(0,i.kt)("a",{parentName:"p",href:"docs/api/ledger-api"},"Ledger API")),(0,i.kt)("h3",{id:"full-list-of-changes-14"},"Full list of changes"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/issues?utf8=%E2%9C%93&q=label%3Arelease%2F4.6.1+is%3Aclosed"},"https://github.com/apache/bookkeeper/issues?utf8=%E2%9C%93&q=label%3Arelease%2F4.6.1+is%3Aclosed"))),(0,i.kt)("h2",{id:"460"},"4.6.0"),(0,i.kt)("p",null,"This is the seventh release of BookKeeper as an Apache Top Level Project!"),(0,i.kt)("p",null,"The 4.6.0 release incorporates new fixes, improvements, and features since previous major release 4.5.0."),(0,i.kt)("p",null,"Apache BookKeeper users are encouraged to upgrade to 4.6.0. The technical details of this release are summarized\nbelow."),(0,i.kt)("h3",{id:"highlights-16"},"Highlights"),(0,i.kt)("p",null,"The main features in 4.6.0 cover are around following areas:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Dependencies Upgrade"),(0,i.kt)("li",{parentName:"ul"},"Bookie enhancement"),(0,i.kt)("li",{parentName:"ul"},"BookKeeper Admin REST API"),(0,i.kt)("li",{parentName:"ul"},"New BookKeeper API"),(0,i.kt)("li",{parentName:"ul"},"Performance improvement"),(0,i.kt)("li",{parentName:"ul"},"Deployment or Ease of use ")),(0,i.kt)("h4",{id:"dependencies-upgrade-3"},"Dependencies Upgrade"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Upgrade Protobuf to ",(0,i.kt)("inlineCode",{parentName:"li"},"3.4"),".")),(0,i.kt)("h4",{id:"bookie-enhancement"},"Bookie enhancement"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Persistable bookie status."),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Prior to this release, bookie status was transient. It is a bit hard for management tooling. This feature adds persistable bookies status. See ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/issues/265"},"Issue-265")," for more details."))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Introduce Bookie Discovery Interface.  Prior to this release, bookkeeper client only provides interfaces for ledger metadata management. It doesn't provide any interface for service discovery part. This feature introduces bookie discovery interface, so it allows plugging in different service discovery backends for bookkeeper."),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Introduce Bookie Registration Manager for bookie server, see ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/issues/662"},"Issue-662")," for more details."),(0,i.kt)("li",{parentName:"ul"},"Introduce registration client for bookkeeper client, see ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/issues/666"},"Issue-666")," for more details."))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Lifecycle components for managing components in bookie server."),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},'Introduce lifecycle component for each service component, which includes "stats provider", "auto recovery", "http endpoint", and "bookie server(both storage and netty server)", to run these components in a clear way. See ',(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/issues/508"},"Issue-508")," and ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/issues/547"},"Issue-547")," for more details."))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Make bookie recovery work with recovering multiple bookies. "),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Make recovery tool work with multiple bookies, so that one call could recover multiple bookies. See ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/issues/612"},"Issue-612")," for more details.")))),(0,i.kt)("h4",{id:"bookkeeper-admin-rest-api"},"BookKeeper Admin REST API"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Introduce a bookkeeper admin endpoint for operations to interact and administer the bookkeeper cluster using REST API. see ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/pull/278"},"PR-278"),", ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/issues/520"},"Issue-520"),", and ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/issues/674"},"Issue-674")," for more details.")),(0,i.kt)("h4",{id:"new-bookkeeper-api"},"New BookKeeper API"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"New Fluent Style API.",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"A brand new API to manage ledgers using the Builder pattern, and new interfaces to make it clear operations on ledgers, like WriteHandle and ReadHandle, are provided in this release. See ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/issues/506"},"Issue-506"),", ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/issues/673"},"Issue-673")," and ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/issues/550"},"Issue-550")," for more details")))),(0,i.kt)("h4",{id:"performance-improvement"},"Performance improvement"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Use ByteBuf in multiple places to avoid unnecessary memory allocation and reduce the garbage produced in JVM. See ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/pull/640"},"PR-640")," for more details.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Separate the FileInfo cache into write and read cache. It avoids catchup reads impact tailing reads and writes. See ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/pull/513"},"PR-513")," for more details."))),(0,i.kt)("h4",{id:"deployment-or-ease-of-use"},"Deployment or Ease of use"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Deployment BookKeeper on K8s. ",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Provide yaml files to run BookKeeper on Kubernetes using both StatefulSets and DaemonSet. See ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/issues/337"},"Issue-337")," and ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/issues/681"},"Issue-681"),"for more details.")))),(0,i.kt)("h3",{id:"existing-api-changes"},"Existing API changes"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"BookKeeper constructor now throws BKException instead of KeeperException."),(0,i.kt)("li",{parentName:"ul"},"The signatures of ",(0,i.kt)("inlineCode",{parentName:"li"},"reorderReadSequence")," and ",(0,i.kt)("inlineCode",{parentName:"li"},"reorderReadLACSequence")," are changed in EnsemblePlacementPolicy.")),(0,i.kt)("h3",{id:"full-list-of-changes-15"},"Full list of changes"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/milestone/2?closed=1"},"https://github.com/apache/bookkeeper/milestone/2?closed=1"))),(0,i.kt)("h2",{id:"451"},"4.5.1"),(0,i.kt)("p",null,"This is the sixth release of BookKeeper as an Apache Top Level Project!"),(0,i.kt)("p",null,"The 4.5.1 release is a bugfix release which fixes a bunch of issues reported from users of 4.5.0."),(0,i.kt)("p",null,"Apache BookKeeper users are encouraged to upgrade to 4.5.1. The technical details of this release are summarized\nbelow."),(0,i.kt)("h3",{id:"highlights-17"},"Highlights"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Fix critical bug on Parallel Recovery, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/issues/343"},"https://github.com/apache/bookkeeper/issues/343"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Fix critical bug on Prometheus stats provider, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/pull/535"},"https://github.com/apache/bookkeeper/pull/535"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Fix critical bug ledger length for LedgerHandleAdv, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/issues/683"},"https://github.com/apache/bookkeeper/issues/683"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},"Fix critical bug on RackAwarePolicy, see ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/issues/551"},"https://github.com/apache/bookkeeper/issues/551")))),(0,i.kt)("h4",{id:"dependencies-upgrade-4"},"Dependencies Upgrade"),(0,i.kt)("p",null,"There is no dependency upgrade since 4.5.0."),(0,i.kt)("h3",{id:"full-list-of-changes-16"},"Full list of changes"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/issues?utf8=%E2%9C%93&q=label%3Arelease%2F4.5.1%20"},"https://github.com/apache/bookkeeper/issues?utf8=%E2%9C%93&q=label%3Arelease%2F4.5.1%20"))),(0,i.kt)("h2",{id:"450"},"4.5.0"),(0,i.kt)("p",null,"This is the fifth release of BookKeeper as an Apache Top Level Project!"),(0,i.kt)("p",null,"The 4.5.0 release incorporates hundreds of new fixes, improvements, and features since previous major release, 4.4.0,\nwhich was released over a year ago. It is a big milestone in Apache BookKeeper community, converging from three\nmain branches (Salesforce, Twitter and Yahoo)."),(0,i.kt)("p",null,"Apache BookKeeper users are encouraged to upgrade to 4.5.0. The technical details of this release are summarized\nbelow."),(0,i.kt)("h3",{id:"highlights-18"},"Highlights"),(0,i.kt)("p",null,"The main features in 4.5.0 cover are around following areas:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Dependencies Upgrade"),(0,i.kt)("li",{parentName:"ul"},"Security"),(0,i.kt)("li",{parentName:"ul"},"Public API"),(0,i.kt)("li",{parentName:"ul"},"Performance"),(0,i.kt)("li",{parentName:"ul"},"Operations")),(0,i.kt)("h4",{id:"dependencies-upgrade-5"},"Dependencies Upgrade"),(0,i.kt)("p",null,"Here is a list of dependencies upgraded in 4.5.0:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Moved the developement from Java 7 to Java 8."),(0,i.kt)("li",{parentName:"ul"},"Upgrade Protobuf to ",(0,i.kt)("inlineCode",{parentName:"li"},"2.6"),"."),(0,i.kt)("li",{parentName:"ul"},"Upgrade ZooKeeper from ",(0,i.kt)("inlineCode",{parentName:"li"},"3.4")," to ",(0,i.kt)("inlineCode",{parentName:"li"},"3.5"),"."),(0,i.kt)("li",{parentName:"ul"},"Upgrade Netty to ",(0,i.kt)("inlineCode",{parentName:"li"},"4.1"),"."),(0,i.kt)("li",{parentName:"ul"},"Upgrade Guava to ",(0,i.kt)("inlineCode",{parentName:"li"},"20.0"),"."),(0,i.kt)("li",{parentName:"ul"},"Upgrade SLF4J to ",(0,i.kt)("inlineCode",{parentName:"li"},"1.7.25"),"."),(0,i.kt)("li",{parentName:"ul"},"Upgrade Codahale to ",(0,i.kt)("inlineCode",{parentName:"li"},"3.1.0"),".")),(0,i.kt)("h4",{id:"security-1"},"Security"),(0,i.kt)("p",null,"Prior to this release, Apache BookKeeper only supports simple ",(0,i.kt)("inlineCode",{parentName:"p"},"DIGEST-MD5")," type authentication."),(0,i.kt)("p",null,"With this release of Apache BookKeeper, a number of feature are introduced that can be used, together of separately,\nto secure a BookKeeper cluster."),(0,i.kt)("p",null,"The following security features are currently supported."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Authentication of connections to bookies from clients, using either ",(0,i.kt)("inlineCode",{parentName:"li"},"TLS")," or `SASL (Kerberos)."),(0,i.kt)("li",{parentName:"ul"},"Authentication of connections from clients, bookies, autorecovery daemons to ",(0,i.kt)("inlineCode",{parentName:"li"},"ZooKeeper"),", when using zookeeper\nbased ledger managers."),(0,i.kt)("li",{parentName:"ul"},"Encryption of data transferred between bookies and clients, between bookies and autorecovery daemons using ",(0,i.kt)("inlineCode",{parentName:"li"},"TLS"),".")),(0,i.kt)("p",null,"It's worth noting that those security features are optional - non-secured clusters are supported, as well as a mix\nof authenticated, unauthenticated, encrypted and non-encrypted clients."),(0,i.kt)("p",null,"For more details, have a look at ",(0,i.kt)("a",{parentName:"p",href:"docs/security/overview"},"BookKeeper Security"),"."),(0,i.kt)("h4",{id:"public-api-2"},"Public API"),(0,i.kt)("p",null,"There are multiple new client features introduced in 4.5.0."),(0,i.kt)("h5",{id:"ledgerhandleadv"},"LedgerHandleAdv"),(0,i.kt)("p",null,"The ","[Ledger API]"," is the low level API provides by BookKeeper for interacting with ",(0,i.kt)("inlineCode",{parentName:"p"},"ledgers")," in a bookkeeper cluster.\nIt is simple but not flexible on ledger id or entry id generation. Apache BookKeeper introduces ",(0,i.kt)("inlineCode",{parentName:"p"},"LedgerHandleAdv"),"\nas an extension of existing ",(0,i.kt)("inlineCode",{parentName:"p"},"LedgerHandle")," for advanced usage. The new ",(0,i.kt)("inlineCode",{parentName:"p"},"LedgerHandleAdv")," allows applications providing\nits own ",(0,i.kt)("inlineCode",{parentName:"p"},"ledger-id")," and assigning ",(0,i.kt)("inlineCode",{parentName:"p"},"entry-id")," on adding entries."),(0,i.kt)("p",null,"See ",(0,i.kt)("a",{parentName:"p",href:"docs/api/ledger-adv-api"},"Ledger Advanced API")," for more details."),(0,i.kt)("h5",{id:"long-poll"},"Long Poll"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"Long Poll")," is a main feature that ",(0,i.kt)("a",{parentName:"p",href:"https://distributedlog.io"},"DistributedLog")," uses to achieve low-latency tailing.\nThis big feature has been merged back in 4.5.0 and available to BookKeeper users."),(0,i.kt)("p",null,"This feature includes two main changes, one is ",(0,i.kt)("inlineCode",{parentName:"p"},"LastAddConfirmed")," piggyback, while the other one is a new ",(0,i.kt)("inlineCode",{parentName:"p"},"long poll")," read API."),(0,i.kt)("p",null,"The first change piggyback the latest ",(0,i.kt)("inlineCode",{parentName:"p"},"LastAddConfirm")," along with the read response, so your ",(0,i.kt)("inlineCode",{parentName:"p"},"LastAddConfirmed")," will be automatically advanced\nwhen your read traffic continues. It significantly reduces the traffic to explicitly polling ",(0,i.kt)("inlineCode",{parentName:"p"},"LastAddConfirmed")," and hence reduces the end-to-end latency."),(0,i.kt)("p",null,"The second change provides a new ",(0,i.kt)("inlineCode",{parentName:"p"},"long poll")," read API, allowing tailing-reads without polling ",(0,i.kt)("inlineCode",{parentName:"p"},"LastAddConfirmed")," everytime after readers exhaust known entries.\nAlthough ",(0,i.kt)("inlineCode",{parentName:"p"},"long poll")," API brings great latency improvements on tailing reads, it is still a very low-level primitive.\nIt is still recommended to use high level API (e.g. ",(0,i.kt)("a",{parentName:"p",href:"docs/api/distributedlog-api"},"DistributedLog API"),") for tailing and streaming use cases."),(0,i.kt)("p",null,"See ",(0,i.kt)("a",{parentName:"p",href:"https://bookkeeper.apache.org/distributedlog/docs/latest/user_guide/design/main.html#streaming-reads"},"Streaming Reads")," for more details."),(0,i.kt)("h5",{id:"explicit-lac"},"Explicit LAC"),(0,i.kt)("p",null,"Prior to 4.5.0, the ",(0,i.kt)("inlineCode",{parentName:"p"},"LAC")," is only advanced when subsequent entries are added. If there is no subsequent entries added,\nthe last entry written will not be visible to readers until the ledger is closed. High-level client (e.g. DistributedLog) or applications\nhas to work around this by writing some sort of ",(0,i.kt)("inlineCode",{parentName:"p"},"control records")," to advance ",(0,i.kt)("inlineCode",{parentName:"p"},"LAC"),"."),(0,i.kt)("p",null,"In 4.5.0, a new ",(0,i.kt)("inlineCode",{parentName:"p"},"explicit lac")," feature is introduced to periodically advance ",(0,i.kt)("inlineCode",{parentName:"p"},"LAC")," if there are not subsequent entries added. This feature\ncan be enabled by setting ",(0,i.kt)("inlineCode",{parentName:"p"},"explicitLacInterval")," to a positive value."),(0,i.kt)("h4",{id:"performance-1"},"Performance"),(0,i.kt)("p",null,"There are a lot for performance related bug fixes and improvements in 4.5.0. These changes includes:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Upgraded netty from 3.x to 4.x to leverage buffer pooling and reduce memory copies."),(0,i.kt)("li",{parentName:"ul"},"Moved developement from Java 7 to Java 8 to take advantage of Java 8 features."),(0,i.kt)("li",{parentName:"ul"},"A lot of improvements around scheduling and threading on ",(0,i.kt)("inlineCode",{parentName:"li"},"bookies"),"."),(0,i.kt)("li",{parentName:"ul"},"Delay ensemble change to improve tail latency."),(0,i.kt)("li",{parentName:"ul"},"Parallel ledger recovery to improve the recovery speed."),(0,i.kt)("li",{parentName:"ul"},"...")),(0,i.kt)("p",null,"We outlined following four changes as below. For a complete list of performance improvements, please checkout the ",(0,i.kt)("inlineCode",{parentName:"p"},"full list of changes")," at the end."),(0,i.kt)("h5",{id:"netty-4-upgrade"},"Netty 4 Upgrade"),(0,i.kt)("p",null,"The major performance improvement introduced in 4.5.0, is upgrading netty from 3.x to ",(0,i.kt)("a",{parentName:"p",href:"http://netty.io/wiki/new-and-noteworthy-in-4.0.html"},"4.x"),"."),(0,i.kt)("p",null,"For more details, please read ",(0,i.kt)("a",{parentName:"p",href:"docs/admin/upgrade"},"upgrade guide")," about the netty related tips when upgrading bookkeeper from 4.4.0 to 4.5.0."),(0,i.kt)("h5",{id:"delay-ensemble-change"},"Delay Ensemble Change"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"Ensemble Change")," is a feature that Apache BookKeeper uses to achieve high availability. However it is an expensive metadata operation.\nEspecially when Apache BookKeeper is deployed in a multiple data-centers environment, losing a data center will cause churn of metadata\noperations due to ensemble changes. ",(0,i.kt)("inlineCode",{parentName:"p"},"Delay Ensemble Change")," is introduced in 4.5.0 to overcome this problem. Enabling this feature means\nan ",(0,i.kt)("inlineCode",{parentName:"p"},"Ensemble Change")," will only occur when clients can't receive enough valid responses to satisfy ",(0,i.kt)("inlineCode",{parentName:"p"},"ack-quorum")," constraint. This feature\nimproves the tail latency."),(0,i.kt)("p",null,"To enable this feature, please set ",(0,i.kt)("inlineCode",{parentName:"p"},"delayEnsembleChange")," to ",(0,i.kt)("inlineCode",{parentName:"p"},"true")," on your clients."),(0,i.kt)("h5",{id:"parallel-ledger-recovery"},"Parallel Ledger Recovery"),(0,i.kt)("p",null,"BookKeeper clients recovers entries one-by-one during ledger recovery. If a ledger has very large volumn of traffic, it will have\nlarge number of entries to recover when client failures occur. BookKeeper introduces ",(0,i.kt)("inlineCode",{parentName:"p"},"parallel ledger recovery")," in 4.5.0 to allow\nbatch recovery to improve ledger recovery speed."),(0,i.kt)("p",null,"To enable this feature, please set ",(0,i.kt)("inlineCode",{parentName:"p"},"enableParallelRecoveryRead")," to ",(0,i.kt)("inlineCode",{parentName:"p"},"true")," on your clients. You can also set ",(0,i.kt)("inlineCode",{parentName:"p"},"recoveryReadBatchSize"),"\nto control the batch size of recovery read."),(0,i.kt)("h5",{id:"multiple-journals"},"Multiple Journals"),(0,i.kt)("p",null,"Prior to 4.5.0, bookies are only allowed to configure one journal device. If you want to have high write bandwidth, you can raid multiple\ndisks into one device and mount that device for jouranl directory. However because there is only one journal thread, this approach doesn't\nactually improve the write bandwidth."),(0,i.kt)("p",null,"BookKeeper introduces multiple journal directories support in 4.5.0. Users can configure multiple devices for journal directories."),(0,i.kt)("p",null,"To enable this feature, please use ",(0,i.kt)("inlineCode",{parentName:"p"},"journalDirectories")," rather than ",(0,i.kt)("inlineCode",{parentName:"p"},"journalDirectory"),"."),(0,i.kt)("h4",{id:"operations-2"},"Operations"),(0,i.kt)("h5",{id:"longhierarchicalledgermanager"},"LongHierarchicalLedgerManager"),(0,i.kt)("p",null,"Apache BookKeeper supports pluggable metadata store. By default, it uses Apache ZooKeeper as its metadata store. Among the zookeeper-based\nledger manager implementations, ",(0,i.kt)("inlineCode",{parentName:"p"},"HierarchicalLedgerManager")," is the most popular and widely adopted ledger manager. However it has a major\nlimitation, which it assumes ",(0,i.kt)("inlineCode",{parentName:"p"},"ledger-id")," is a 32-bits integer. It limits the number of ledgers to ",(0,i.kt)("inlineCode",{parentName:"p"},"2^32"),"."),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"LongHierarchicalLedgerManager")," is introduced to overcome this limitation."),(0,i.kt)("p",null,"See ",(0,i.kt)("a",{parentName:"p",href:"docs/getting-started/concepts#ledger-manager"},"Ledger Manager")," for more details."),(0,i.kt)("h5",{id:"weight-based-placement-policy"},"Weight-based placement policy"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"Rack-Aware")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"Region-Aware")," placement polices are the two available placement policies in BookKeeper client. It places ensembles based\non users' configured network topology. However they both assume that all nodes are equal. ",(0,i.kt)("inlineCode",{parentName:"p"},"weight-based")," placement is introduced in 4.5.0 to\nimprove the existing placement polices. ",(0,i.kt)("inlineCode",{parentName:"p"},"weight-based")," placement was not built as separated polices. It is built in the existing placement policies.\nIf you are using ",(0,i.kt)("inlineCode",{parentName:"p"},"Rack-Aware")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"Region-Aware"),", you can simply enable ",(0,i.kt)("inlineCode",{parentName:"p"},"weight-based")," placement by setting ",(0,i.kt)("inlineCode",{parentName:"p"},"diskWeightBasedPlacementEnabled")," to ",(0,i.kt)("inlineCode",{parentName:"p"},"true"),"."),(0,i.kt)("h5",{id:"customized-ledger-metadata"},"Customized Ledger Metadata"),(0,i.kt)("p",null,"A ",(0,i.kt)("inlineCode",{parentName:"p"},"Map<String, byte[]>")," is introduced in ledger metadata in 4.5.0. Clients now are allowed to pass in a key/value map when creating ledgers.\nThis customized ledger metadata can be later on used by user defined placement policy. This extends the flexibility of bookkeeper API."),(0,i.kt)("h5",{id:"add-prometheus-stats-provider"},"Add Prometheus stats provider"),(0,i.kt)("p",null,"A new ",(0,i.kt)("a",{parentName:"p",href:"https://prometheus.io/"},"Prometheus")," ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/apache/bookkeeper/tree/master/bookkeeper-stats-providers/prometheus-metrics-provider"},"stats provider"),"\nis introduce in 4.5.0. It simplies the metric collection when running bookkeeper on ",(0,i.kt)("a",{parentName:"p",href:"https://kubernetes.io/"},"kubernetes"),"."),(0,i.kt)("h5",{id:"add-more-tools-in-bookieshell"},"Add more tools in BookieShell"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"BookieShell")," is the tool provided by Apache BooKeeper to operate clusters. There are multiple importants tools introduced in 4.5.0, for example, ",(0,i.kt)("inlineCode",{parentName:"p"},"decommissionbookie"),",\n",(0,i.kt)("inlineCode",{parentName:"p"},"expandstorage"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"lostbookierecoverydelay"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"triggeraudit"),"."),(0,i.kt)("p",null,"For the complete list of commands in ",(0,i.kt)("inlineCode",{parentName:"p"},"BookieShell"),", please read ",(0,i.kt)("a",{parentName:"p",href:"docs/reference/cli"},"BookKeeper CLI tool reference"),"."),(0,i.kt)("h3",{id:"full-list-of-changes-17"},"Full list of changes"),(0,i.kt)("h4",{id:"jira"},"JIRA"),(0,i.kt)("h5",{id:"sub-task"},"Sub-task"),(0,i.kt)("ul",null,(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-552"},"BOOKKEEPER-552"),"] -         64 Bits Ledger ID Generation"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-553"},"BOOKKEEPER-553"),"] -         New LedgerManager for 64 Bits Ledger ID Management in ZooKeeper"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-588"},"BOOKKEEPER-588"),"] -         SSL support"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-873"},"BOOKKEEPER-873"),"] -         Enhance CreatedLedger API to accept ledgerId as input"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-949"},"BOOKKEEPER-949"),"] -         Allow entryLog creation even when bookie is in RO mode for compaction"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-965"},"BOOKKEEPER-965"),"] -         Long Poll: Changes to the Write Path"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-997"},"BOOKKEEPER-997"),"] -         Wire protocol change for supporting long poll"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1017"},"BOOKKEEPER-1017"),"] -         Create documentation for ZooKeeper ACLs"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1086"},"BOOKKEEPER-1086"),"] -         Ledger Recovery - Refactor PendingReadOp"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1087"},"BOOKKEEPER-1087"),"] -         Ledger Recovery - Add a parallel reading request in PendingReadOp"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1088"},"BOOKKEEPER-1088"),"] -         Ledger Recovery - Add a ReadEntryListener to callback on individual request"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1089"},"BOOKKEEPER-1089"),"] -         Ledger Recovery - allow batch reads in ledger recovery"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1092"},"BOOKKEEPER-1092"),"] -         Ledger Recovery - Add Test Case for Parallel Ledger Recovery"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1093"},"BOOKKEEPER-1093"),"] -         Piggyback LAC on ReadResponse"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1094"},"BOOKKEEPER-1094"),"] -         Long Poll - Server and Client Side Changes"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1095"},"BOOKKEEPER-1095"),"] -         Long Poll - Client side changes")),(0,i.kt)("b",null,"Bug"),(0,i.kt)("ul",null,(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-852"},"BOOKKEEPER-852"),"] -         Release LedgerDescriptor and master-key objects when not used anymore"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-903"},"BOOKKEEPER-903"),"] -         MetaFormat BookieShell Command is not deleting UnderReplicatedLedgers list from the ZooKeeper"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-907"},"BOOKKEEPER-907"),"] -         for ReadLedgerEntriesCmd, EntryFormatter should be configurable and HexDumpEntryFormatter should be one of them"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-908"},"BOOKKEEPER-908"),"] -         Case to handle BKLedgerExistException"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-924"},"BOOKKEEPER-924"),"] -         addEntry() is susceptible to spurious wakeups"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-927"},"BOOKKEEPER-927"),"] -         Extend BOOKKEEPER-886 to LedgerHandleAdv too (BOOKKEEPER-886: Allow to disable ledgers operation throttling)"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-933"},"BOOKKEEPER-933"),"] -         ClientConfiguration always inherits System properties"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-938"},"BOOKKEEPER-938"),"] -         LedgerOpenOp should use digestType from metadata"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-939"},"BOOKKEEPER-939"),"] -         Fix typo in bk-merge-pr.py"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-940"},"BOOKKEEPER-940"),"] -         Fix findbugs warnings after bumping to java 8"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-952"},"BOOKKEEPER-952"),"] -         Fix RegionAwarePlacementPolicy"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-955"},"BOOKKEEPER-955"),"] -         in BookKeeperAdmin listLedgers method currentRange variable is not getting updated to next iterator when it has run out of elements"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-956"},"BOOKKEEPER-956"),"] -         HierarchicalLedgerManager doesn't work for ledgerid of length 9 and 10 because of order issue in HierarchicalLedgerRangeIterator"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-958"},"BOOKKEEPER-958"),"] -         ZeroBuffer readOnlyBuffer returns ByteBuffer with 0 remaining bytes for length > 64k"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-959"},"BOOKKEEPER-959"),"] -         ClientAuthProvider and BookieAuthProvider Public API used Protobuf Shaded classes"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-976"},"BOOKKEEPER-976"),'] -         Fix license headers with "Copyright 2016 The Apache Software Foundation"'),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-980"},"BOOKKEEPER-980"),"] -         BookKeeper Tools doesn't process the argument correctly"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-981"},"BOOKKEEPER-981"),"] -         NullPointerException in RackawareEnsemblePlacementPolicy while running in Docker Container"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-984"},"BOOKKEEPER-984"),"] -          BookieClientTest.testWriteGaps tested"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-986"},"BOOKKEEPER-986"),"] -         Handle Memtable flush failure"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-987"},"BOOKKEEPER-987"),"] -         BookKeeper build is broken due to the shade plugin for commit ecbb053e6e"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-988"},"BOOKKEEPER-988"),"] -         Missing license headers"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-989"},"BOOKKEEPER-989"),"] -         Enable travis CI for bookkeeper git"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-999"},"BOOKKEEPER-999"),"] -         BookKeeper client can leak threads"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1013"},"BOOKKEEPER-1013"),"] -         Fix findbugs errors on latest master"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1018"},"BOOKKEEPER-1018"),"] -         Allow client to select older V2 protocol (no protobuf)"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1020"},"BOOKKEEPER-1020"),"] -         Fix Explicit LAC tests on master"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1021"},"BOOKKEEPER-1021"),"] -         Improve the merge script to handle github reviews api"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1031"},"BOOKKEEPER-1031"),"] -         ReplicationWorker.rereplicate fails to call close() on ReadOnlyLedgerHandle"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1044"},"BOOKKEEPER-1044"),"] -         Entrylogger is not readding rolled logs back to the logChannelsToFlush list when exception happens while trying to flush rolled logs"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1047"},"BOOKKEEPER-1047"),"] -         Add missing error code in ZK setData return path"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1058"},"BOOKKEEPER-1058"),"] -         Ignore already deleted ledger on replication audit"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1061"},"BOOKKEEPER-1061"),"] -         BookieWatcher should not do ZK blocking operations from ZK async callback thread"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1065"},"BOOKKEEPER-1065"),"] -         OrderedSafeExecutor should only have 1 thread per bucket"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1071"},"BOOKKEEPER-1071"),"] -         BookieRecoveryTest is failing due to a Netty4 IllegalReferenceCountException"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1072"},"BOOKKEEPER-1072"),"] -         CompactionTest is flaky when disks are almost full"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1073"},"BOOKKEEPER-1073"),"] -         Several stats provider related changes."),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1074"},"BOOKKEEPER-1074"),"] -         Remove JMX Bean"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1075"},"BOOKKEEPER-1075"),"] -         BK LedgerMetadata: more memory-efficient parsing of configs"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1076"},"BOOKKEEPER-1076"),"] -         BookieShell should be able to read the 'FENCE' entry in the log"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1077"},"BOOKKEEPER-1077"),"] -         BookKeeper: Local Bookie Journal and ledger paths"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1079"},"BOOKKEEPER-1079"),"] -         shell lastMark throws NPE"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1098"},"BOOKKEEPER-1098"),"] -         ZkUnderreplicationManager can build up an unbounded number of watchers"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1101"},"BOOKKEEPER-1101"),"] -         BookKeeper website menus not working under https"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1102"},"BOOKKEEPER-1102"),"] -         org.apache.bookkeeper.client.BookKeeperDiskSpaceWeightedLedgerPlacementTest.testDiskSpaceWeightedBookieSelectionWithBookiesBeingAdded is unreliable"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1103"},"BOOKKEEPER-1103"),"] -         LedgerMetadataCreateTest bug in ledger id generation causes intermittent hang"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1104"},"BOOKKEEPER-1104"),"] -         BookieInitializationTest.testWithDiskFullAndAbilityToCreateNewIndexFile testcase is unreliable")),(0,i.kt)("b",null,"Improvement"),(0,i.kt)("ul",null,(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-612"},"BOOKKEEPER-612"),"] -         RegionAwarePlacement Policy"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-748"},"BOOKKEEPER-748"),"] -         Move fence requests out of read threads"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-757"},"BOOKKEEPER-757"),"] -         Ledger Recovery Improvement"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-759"},"BOOKKEEPER-759"),"] -         bookkeeper: delay ensemble change if it doesn't break ack quorum requirement"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-772"},"BOOKKEEPER-772"),"] -         Reorder read sequnce"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-874"},"BOOKKEEPER-874"),"] -         Explict LAC from Writer to Bookies"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-881"},"BOOKKEEPER-881"),"] -         upgrade surefire plugin to 2.19"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-887"},"BOOKKEEPER-887"),"] -         Allow to use multiple bookie journals"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-922"},"BOOKKEEPER-922"),"] -         Create a generic (K,V) map to store ledger metadata"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-935"},"BOOKKEEPER-935"),"] -         Publish sources and javadocs to Maven Central"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-937"},"BOOKKEEPER-937"),"] -         Upgrade protobuf to 2.6"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-944"},"BOOKKEEPER-944"),"] -         Multiple issues and improvements to BK Compaction."),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-945"},"BOOKKEEPER-945"),"] -         Add counters to track the activity of auditor and replication workers"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-946"},"BOOKKEEPER-946"),"] -         Provide an option to delay auto recovery of lost bookies"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-961"},"BOOKKEEPER-961"),"] -         Assing read/write request for same ledger to a single thread"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-962"},"BOOKKEEPER-962"),"] -         Add more journal timing stats"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-963"},"BOOKKEEPER-963"),"] -         Allow to use multiple journals in bookie"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-964"},"BOOKKEEPER-964"),"] -         Add concurrent maps and sets for primitive types"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-966"},"BOOKKEEPER-966"),"] -         change the bookieServer cmdline to make conf-file and option co-exist"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-968"},"BOOKKEEPER-968"),"] -         Entry log flushes happen on log rotation and cause long spikes in IO utilization"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-970"},"BOOKKEEPER-970"),"] -         Bump zookeeper version to 3.5"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-971"},"BOOKKEEPER-971"),"] -         update bk codahale stats provider version"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-998"},"BOOKKEEPER-998"),"] -         Increased the max entry size to 5MB"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1001"},"BOOKKEEPER-1001"),"] -         Make LocalBookiesRegistry.isLocalBookie() public"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1002"},"BOOKKEEPER-1002"),"] -         BookieRecoveryTest can run out of file descriptors"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1003"},"BOOKKEEPER-1003"),"] -         Fix TestDiskChecker so it can be used on /dev/shm"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1004"},"BOOKKEEPER-1004"),"] -         Allow bookie garbage collection to be triggered manually from tests"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1007"},"BOOKKEEPER-1007"),"] -         Explicit LAC: make the interval configurable in milliseconds instead of seconds"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1008"},"BOOKKEEPER-1008"),"] -         Move to netty4"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1010"},"BOOKKEEPER-1010"),"] -         Bump up Guava version to 20.0"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1022"},"BOOKKEEPER-1022"),"] -         Make BookKeeperAdmin implement AutoCloseable"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1039"},"BOOKKEEPER-1039"),"] -         bk-merge-pr.py ask to run findbugs and rat before merge"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1046"},"BOOKKEEPER-1046"),"] -         Avoid long to Long conversion in OrderedSafeExecutor task submit"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1048"},"BOOKKEEPER-1048"),"] -         Use ByteBuf in LedgerStorageInterface"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1050"},"BOOKKEEPER-1050"),"] -         Cache journalFormatVersionToWrite when starting Journal"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1051"},"BOOKKEEPER-1051"),"] -         Fast shutdown for GarbageCollectorThread"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1052"},"BOOKKEEPER-1052"),"] -         Print autorecovery enabled or not in bookie shell"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1053"},"BOOKKEEPER-1053"),"] -         Upgrade RAT maven version to 0.12 and ignore Eclipse project files"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1055"},"BOOKKEEPER-1055"),"] -         Optimize handling of masterKey in case it is empty"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1056"},"BOOKKEEPER-1056"),"] -         Removed PacketHeader serialization/deserialization allocation"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1063"},"BOOKKEEPER-1063"),"] -         Use executure.execute() instead of submit() to avoid creation of unused FutureTask"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1066"},"BOOKKEEPER-1066"),"] -         Introduce GrowableArrayBlockingQueue"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1068"},"BOOKKEEPER-1068"),"] -         Expose ByteBuf in LedgerEntry to avoid data copy"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1069"},"BOOKKEEPER-1069"),"] -         If client uses V2 proto, set the connection to always decode V2 messages"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1083"},"BOOKKEEPER-1083"),"] -         Improvements on OrderedSafeExecutor"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1084"},"BOOKKEEPER-1084"),"] -         Make variables finale if necessary"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1085"},"BOOKKEEPER-1085"),"] -         Introduce the AlertStatsLogger"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1090"},"BOOKKEEPER-1090"),"] -         Use LOG.isDebugEnabled() to avoid unexpected allocations"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1096"},"BOOKKEEPER-1096"),"] -         When ledger is deleted, along with leaf node all the eligible branch nodes also should be deleted in ZooKeeper.")),(0,i.kt)("b",null,"New Feature"),(0,i.kt)("ul",null,(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-390"},"BOOKKEEPER-390"),"] -         Provide support for ZooKeeper authentication"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-391"},"BOOKKEEPER-391"),"] -         Support Kerberos authentication of bookkeeper"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-575"},"BOOKKEEPER-575"),"] -         Bookie SSL support"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-670"},"BOOKKEEPER-670"),"] -         Longpoll Read & Piggyback Support"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-912"},"BOOKKEEPER-912"),"] -         Allow EnsemblePlacementPolicy to choose bookies using ledger custom data (multitenancy support)"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-928"},"BOOKKEEPER-928"),"] -         Add custom client supplied metadata field to LedgerMetadata"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-930"},"BOOKKEEPER-930"),"] -         Option to disable Bookie networking"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-941"},"BOOKKEEPER-941"),"] -         Introduce Feature Switches For controlling client and server behavior"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-948"},"BOOKKEEPER-948"),"] -         Provide an option to add more ledger/index directories to a bookie"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-950"},"BOOKKEEPER-950"),"] -         Ledger placement policy to accomodate different storage capacity of bookies"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-969"},"BOOKKEEPER-969"),"] -         Security Support"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-983"},"BOOKKEEPER-983"),"] -         BookieShell Command for LedgerDelete"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-991"},"BOOKKEEPER-991"),"] -         bk shell - Get a list of all on disk files"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-992"},"BOOKKEEPER-992"),"] -         ReadLog Command Enhancement"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1019"},"BOOKKEEPER-1019"),"] -         Support for reading entries after LAC (causal consistency driven by out-of-band communications)"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1034"},"BOOKKEEPER-1034"),"] -         When all disks are full, start Bookie in RO mode if RO mode is enabled"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1067"},"BOOKKEEPER-1067"),"] -         Add Prometheus stats provider")),(0,i.kt)("b",null,"Story"),(0,i.kt)("ul",null,(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-932"},"BOOKKEEPER-932"),"] -         Move to JDK 8")),(0,i.kt)("b",null,"Task"),(0,i.kt)("ul",null,(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-931"},"BOOKKEEPER-931"),"] -         Update the committers list on website"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-996"},"BOOKKEEPER-996"),"] -         Apache Rat Check Failures"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1012"},"BOOKKEEPER-1012"),"] -         Shade and relocate Guava"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1027"},"BOOKKEEPER-1027"),"] -         Cleanup main README and main website page"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1038"},"BOOKKEEPER-1038"),"] -         Fix findbugs warnings and upgrade to 3.0.4"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1043"},"BOOKKEEPER-1043"),"] -         Upgrade Apache Parent Pom Reference to latest version"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1054"},"BOOKKEEPER-1054"),"] -         Add gitignore file"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1059"},"BOOKKEEPER-1059"),"] -         Upgrade to SLF4J-1.7.25"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1060"},"BOOKKEEPER-1060"),"] -         Add utility to use SafeRunnable from Java8 Lambda"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1070"},"BOOKKEEPER-1070"),"] -         bk-merge-pr.py use apache-rat:check goal instead of rat:rat"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1091"},"BOOKKEEPER-1091"),"] -         Remove Hedwig from BookKeeper website page")),(0,i.kt)("b",null,"Test"),(0,i.kt)("ul",null,(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-967"},"BOOKKEEPER-967"),"] -         Create new testsuite for testing RackAwareEnsemblePlacementPolicy using ScriptBasedMapping."),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1045"},"BOOKKEEPER-1045"),"] -         Execute tests in different JVM processes"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1064"},"BOOKKEEPER-1064"),"] -         ConcurrentModificationException in AuditorLedgerCheckerTest"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1078"},"BOOKKEEPER-1078"),"] -         Local BookKeeper enhancements for testability"),(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-1097"},"BOOKKEEPER-1097"),"] -         GC test when no WritableDirs")),(0,i.kt)("b",null,"Wish"),(0,i.kt)("ul",null,(0,i.kt)("li",null,"[",(0,i.kt)("a",{href:"https://issues.apache.org/jira/browse/BOOKKEEPER-943"},"BOOKKEEPER-943"),"] -         Reduce log level of AbstractZkLedgerManager for register/unregister ReadOnlyLedgerHandle")),(0,i.kt)("h4",{id:"github"},"Github"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/apache/bookkeeper/milestone/1"},"https://github.com/apache/bookkeeper/milestone/1"))))}k.isMDXComponent=!0}}]);