<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>LedgerUnderreplicationManager (BookKeeper Java API (version 4.16.0-SNAPSHOT))</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../jquery/jquery-3.5.1.js"></script>
<script type="text/javascript" src="../../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="LedgerUnderreplicationManager (BookKeeper Java API (version 4.16.0-SNAPSHOT))";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":6,"i1":6,"i2":6,"i3":6,"i4":6,"i5":6,"i6":6,"i7":6,"i8":6,"i9":6,"i10":6,"i11":6,"i12":6,"i13":6,"i14":6,"i15":6,"i16":18,"i17":6,"i18":6,"i19":6,"i20":6,"i21":6,"i22":6,"i23":6,"i24":6,"i25":6,"i26":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"],16:["t5","Default Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../";
var useModuleDirectories = false;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">org.apache.bookkeeper.meta</a></div>
<h2 title="Interface LedgerUnderreplicationManager" class="title">Interface LedgerUnderreplicationManager</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Superinterfaces:</dt>
<dd><code>java.lang.AutoCloseable</code></dd>
</dl>
<dl>
<dt>All Known Implementing Classes:</dt>
<dd><code><a href="NullMetadataBookieDriver.NullLedgerUnderreplicationManager.html" title="class in org.apache.bookkeeper.meta">NullMetadataBookieDriver.NullLedgerUnderreplicationManager</a></code>, <code><a href="ZkLedgerUnderreplicationManager.html" title="class in org.apache.bookkeeper.meta">ZkLedgerUnderreplicationManager</a></code></dd>
</dl>
<hr>
<pre>public interface <span class="typeNameLabel">LedgerUnderreplicationManager</span>
extends java.lang.AutoCloseable</pre>
<div class="block">Interface for marking ledgers which need to be rereplicated.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t5" class="tableTab"><span><a href="javascript:show(16);">Default Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#acquireUnderreplicatedLedger(long)">acquireUnderreplicatedLedger</a></span>&#8203;(long&nbsp;ledgerId)</code></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#close()">close</a></span>()</code></th>
<td class="colLast">
<div class="block">Release all resources held by the ledger underreplication manager.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#disableLedgerReplication()">disableLedgerReplication</a></span>()</code></th>
<td class="colLast">
<div class="block">Stop ledger replication.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#enableLedgerReplication()">enableLedgerReplication</a></span>()</code></th>
<td class="colLast">
<div class="block">Resuming ledger replication.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getCheckAllLedgersCTime()">getCheckAllLedgersCTime</a></span>()</code></th>
<td class="colLast">
<div class="block">Getter for the CheckAllLedgers last executed ctime.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getLedgerToRereplicate()">getLedgerToRereplicate</a></span>()</code></th>
<td class="colLast">
<div class="block">Acquire a underreplicated ledger for rereplication.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code><a href="UnderreplicatedLedger.html" title="class in org.apache.bookkeeper.meta">UnderreplicatedLedger</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getLedgerUnreplicationInfo(long)">getLedgerUnreplicationInfo</a></span>&#8203;(long&nbsp;ledgerId)</code></th>
<td class="colLast">
<div class="block">Get the UnderreplicatedLedger info if this ledger is marked
 underreplicated otherwise it returns null.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getLostBookieRecoveryDelay()">getLostBookieRecoveryDelay</a></span>()</code></th>
<td class="colLast">
<div class="block">Getter for the lostBookieRecoveryDelay.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getPlacementPolicyCheckCTime()">getPlacementPolicyCheckCTime</a></span>()</code></th>
<td class="colLast">
<div class="block">Getter for the PlacementPolicyCheck last executed ctime.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getReplicasCheckCTime()">getReplicasCheckCTime</a></span>()</code></th>
<td class="colLast">
<div class="block">Getter for the ReplicasCheck last executed ctime.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getReplicationWorkerIdRereplicatingLedger(long)">getReplicationWorkerIdRereplicatingLedger</a></span>&#8203;(long&nbsp;ledgerId)</code></th>
<td class="colLast">
<div class="block">If a replicationworker has acquired lock on an underreplicated ledger,
 then getReplicationWorkerIdRereplicatingLedger should return
 ReplicationWorkerId (BookieId) of the ReplicationWorker that is holding
 lock.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#initializeLostBookieRecoveryDelay(int)">initializeLostBookieRecoveryDelay</a></span>&#8203;(int&nbsp;lostBookieRecoveryDelay)</code></th>
<td class="colLast">
<div class="block">Creates the zNode for lostBookieRecoveryDelay with the specified value and returns true.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isLedgerBeingReplicated(long)">isLedgerBeingReplicated</a></span>&#8203;(long&nbsp;ledgerId)</code></th>
<td class="colLast">
<div class="block">Check whether the ledger is being replicated by any bookie.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isLedgerReplicationEnabled()">isLedgerReplicationEnabled</a></span>()</code></th>
<td class="colLast">
<div class="block">Check whether the ledger replication is enabled or not.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>java.util.Iterator&lt;<a href="UnderreplicatedLedger.html" title="class in org.apache.bookkeeper.meta">UnderreplicatedLedger</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#listLedgersToRereplicate(java.util.function.Predicate)">listLedgersToRereplicate</a></span>&#8203;(java.util.function.Predicate&lt;java.util.List&lt;java.lang.String&gt;&gt;&nbsp;predicate)</code></th>
<td class="colLast">
<div class="block">Get a list of all the underreplicated ledgers which have been
 marked for rereplication, filtered by the predicate on the missing replicas list.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#markLedgerReplicated(long)">markLedgerReplicated</a></span>&#8203;(long&nbsp;ledgerId)</code></th>
<td class="colLast">
<div class="block">Mark a ledger as fully replicated.</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>default void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#markLedgerUnderreplicated(long,java.lang.String)">markLedgerUnderreplicated</a></span>&#8203;(long&nbsp;ledgerId,
                         java.lang.String&nbsp;missingReplica)</code></th>
<td class="colLast">
<div class="block">Mark a ledger as underreplicated.</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>java.util.concurrent.CompletableFuture&lt;java.lang.Void&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#markLedgerUnderreplicatedAsync(long,java.util.Collection)">markLedgerUnderreplicatedAsync</a></span>&#8203;(long&nbsp;ledgerId,
                              java.util.Collection&lt;java.lang.String&gt;&nbsp;missingReplicas)</code></th>
<td class="colLast">
<div class="block">Mark a ledger as underreplicated with missing bookies.</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#notifyLedgerReplicationEnabled(org.apache.bookkeeper.proto.BookkeeperInternalCallbacks.GenericCallback)">notifyLedgerReplicationEnabled</a></span>&#8203;(<a href="../proto/BookkeeperInternalCallbacks.GenericCallback.html" title="interface in org.apache.bookkeeper.proto">BookkeeperInternalCallbacks.GenericCallback</a>&lt;java.lang.Void&gt;&nbsp;cb)</code></th>
<td class="colLast">
<div class="block">Receive notification asynchronously when the ledger replication process
 is enabled.</div>
</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#notifyLostBookieRecoveryDelayChanged(org.apache.bookkeeper.proto.BookkeeperInternalCallbacks.GenericCallback)">notifyLostBookieRecoveryDelayChanged</a></span>&#8203;(<a href="../proto/BookkeeperInternalCallbacks.GenericCallback.html" title="interface in org.apache.bookkeeper.proto">BookkeeperInternalCallbacks.GenericCallback</a>&lt;java.lang.Void&gt;&nbsp;cb)</code></th>
<td class="colLast">
<div class="block">Receive notification asynchronously when the lostBookieRecoveryDelay value is Changed.</div>
</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#notifyUnderReplicationLedgerChanged(org.apache.bookkeeper.proto.BookkeeperInternalCallbacks.GenericCallback)">notifyUnderReplicationLedgerChanged</a></span>&#8203;(<a href="../proto/BookkeeperInternalCallbacks.GenericCallback.html" title="interface in org.apache.bookkeeper.proto">BookkeeperInternalCallbacks.GenericCallback</a>&lt;java.lang.Void&gt;&nbsp;cb)</code></th>
<td class="colLast">
<div class="block">Receive notification asynchronously when the num of under-replicated ledgers  Changed.</div>
</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#pollLedgerToRereplicate()">pollLedgerToRereplicate</a></span>()</code></th>
<td class="colLast">
<div class="block">Poll for a underreplicated ledger to rereplicate.</div>
</td>
</tr>
<tr id="i22" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#releaseUnderreplicatedLedger(long)">releaseUnderreplicatedLedger</a></span>&#8203;(long&nbsp;ledgerId)</code></th>
<td class="colLast">
<div class="block">Release a previously acquired ledger.</div>
</td>
</tr>
<tr id="i23" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setCheckAllLedgersCTime(long)">setCheckAllLedgersCTime</a></span>&#8203;(long&nbsp;checkAllLedgersCTime)</code></th>
<td class="colLast">
<div class="block">Setter for the CheckAllLedgers last executed ctime.</div>
</td>
</tr>
<tr id="i24" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setLostBookieRecoveryDelay(int)">setLostBookieRecoveryDelay</a></span>&#8203;(int&nbsp;lostBookieRecoveryDelay)</code></th>
<td class="colLast">
<div class="block">Setter for the lostBookieRecoveryDelay znode.</div>
</td>
</tr>
<tr id="i25" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setPlacementPolicyCheckCTime(long)">setPlacementPolicyCheckCTime</a></span>&#8203;(long&nbsp;placementPolicyCheckCTime)</code></th>
<td class="colLast">
<div class="block">Setter for the PlacementPolicyCheck last executed ctime.</div>
</td>
</tr>
<tr id="i26" class="altColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#setReplicasCheckCTime(long)">setReplicasCheckCTime</a></span>&#8203;(long&nbsp;replicasCheckCTime)</code></th>
<td class="colLast">
<div class="block">Setter for the ReplicasCheck last executed ctime.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="markLedgerUnderreplicated(long,java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>markLedgerUnderreplicated</h4>
<pre class="methodSignature">default&nbsp;void&nbsp;markLedgerUnderreplicated&#8203;(long&nbsp;ledgerId,
                                       java.lang.String&nbsp;missingReplica)
                                throws <a href="../replication/ReplicationException.html" title="class in org.apache.bookkeeper.replication">ReplicationException</a></pre>
<div class="block">Mark a ledger as underreplicated. The replication should
 then check which fragments are underreplicated and rereplicate them</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../replication/ReplicationException.html" title="class in org.apache.bookkeeper.replication">ReplicationException</a></code></dd>
</dl>
</li>
</ul>
<a id="isLedgerBeingReplicated(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isLedgerBeingReplicated</h4>
<pre class="methodSignature">boolean&nbsp;isLedgerBeingReplicated&#8203;(long&nbsp;ledgerId)
                         throws <a href="../replication/ReplicationException.html" title="class in org.apache.bookkeeper.replication">ReplicationException</a></pre>
<div class="block">Check whether the ledger is being replicated by any bookie.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../replication/ReplicationException.html" title="class in org.apache.bookkeeper.replication">ReplicationException</a></code></dd>
</dl>
</li>
</ul>
<a id="markLedgerUnderreplicatedAsync(long,java.util.Collection)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>markLedgerUnderreplicatedAsync</h4>
<pre class="methodSignature">java.util.concurrent.CompletableFuture&lt;java.lang.Void&gt;&nbsp;markLedgerUnderreplicatedAsync&#8203;(long&nbsp;ledgerId,
                                                                                      java.util.Collection&lt;java.lang.String&gt;&nbsp;missingReplicas)</pre>
<div class="block">Mark a ledger as underreplicated with missing bookies. The replication should then
 check which fragements are underreplicated and rereplicate them.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ledgerId</code> - ledger id</dd>
<dd><code>missingReplicas</code> - missing replicas</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a future presents the mark result.</dd>
</dl>
</li>
</ul>
<a id="markLedgerReplicated(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>markLedgerReplicated</h4>
<pre class="methodSignature">void&nbsp;markLedgerReplicated&#8203;(long&nbsp;ledgerId)
                   throws <a href="../replication/ReplicationException.UnavailableException.html" title="class in org.apache.bookkeeper.replication">ReplicationException.UnavailableException</a></pre>
<div class="block">Mark a ledger as fully replicated. If the ledger is not
 already marked as underreplicated, this is a noop.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../replication/ReplicationException.UnavailableException.html" title="class in org.apache.bookkeeper.replication">ReplicationException.UnavailableException</a></code></dd>
</dl>
</li>
</ul>
<a id="getLedgerUnreplicationInfo(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLedgerUnreplicationInfo</h4>
<pre class="methodSignature"><a href="UnderreplicatedLedger.html" title="class in org.apache.bookkeeper.meta">UnderreplicatedLedger</a>&nbsp;getLedgerUnreplicationInfo&#8203;(long&nbsp;ledgerId)
                                          throws <a href="../replication/ReplicationException.UnavailableException.html" title="class in org.apache.bookkeeper.replication">ReplicationException.UnavailableException</a></pre>
<div class="block">Get the UnderreplicatedLedger info if this ledger is marked
 underreplicated otherwise it returns null.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ledgerId</code> - ledger id</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the UnderreplicatedLedger info instance if this ledger is marked
         underreplicated otherwise it returns null.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../replication/ReplicationException.UnavailableException.html" title="class in org.apache.bookkeeper.replication">ReplicationException.UnavailableException</a></code></dd>
</dl>
</li>
</ul>
<a id="listLedgersToRereplicate(java.util.function.Predicate)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>listLedgersToRereplicate</h4>
<pre class="methodSignature">java.util.Iterator&lt;<a href="UnderreplicatedLedger.html" title="class in org.apache.bookkeeper.meta">UnderreplicatedLedger</a>&gt;&nbsp;listLedgersToRereplicate&#8203;(java.util.function.Predicate&lt;java.util.List&lt;java.lang.String&gt;&gt;&nbsp;predicate)</pre>
<div class="block">Get a list of all the underreplicated ledgers which have been
 marked for rereplication, filtered by the predicate on the missing replicas list.

 <p>Missing replicas list of an underreplicated ledger is the list of the bookies which are part of
 the ensemble of this ledger and are currently unavailable/down.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>predicate</code> - filter to use while listing under replicated ledgers. 'null' if filtering is not required</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>an iterator which returns underreplicated ledgers.</dd>
</dl>
</li>
</ul>
<a id="getLedgerToRereplicate()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLedgerToRereplicate</h4>
<pre class="methodSignature">long&nbsp;getLedgerToRereplicate()
                     throws <a href="../replication/ReplicationException.UnavailableException.html" title="class in org.apache.bookkeeper.replication">ReplicationException.UnavailableException</a></pre>
<div class="block">Acquire a underreplicated ledger for rereplication. The ledger
 should be locked, so that no other agent will receive the ledger
 from this call.
 The ledger should remain locked until either #markLedgerComplete
 or #releaseLedger are called.
 This call is blocking, so will not return until a ledger is
 available for rereplication.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../replication/ReplicationException.UnavailableException.html" title="class in org.apache.bookkeeper.replication">ReplicationException.UnavailableException</a></code></dd>
</dl>
</li>
</ul>
<a id="pollLedgerToRereplicate()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>pollLedgerToRereplicate</h4>
<pre class="methodSignature">long&nbsp;pollLedgerToRereplicate()
                      throws <a href="../replication/ReplicationException.UnavailableException.html" title="class in org.apache.bookkeeper.replication">ReplicationException.UnavailableException</a></pre>
<div class="block">Poll for a underreplicated ledger to rereplicate.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the ledgerId, or -1 if none are available</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../replication/ReplicationException.UnavailableException.html" title="class in org.apache.bookkeeper.replication">ReplicationException.UnavailableException</a></code></dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#getLedgerToRereplicate()"><code>getLedgerToRereplicate()</code></a></dd>
</dl>
</li>
</ul>
<a id="acquireUnderreplicatedLedger(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>acquireUnderreplicatedLedger</h4>
<pre class="methodSignature">void&nbsp;acquireUnderreplicatedLedger&#8203;(long&nbsp;ledgerId)
                           throws <a href="../replication/ReplicationException.html" title="class in org.apache.bookkeeper.replication">ReplicationException</a></pre>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../replication/ReplicationException.html" title="class in org.apache.bookkeeper.replication">ReplicationException</a></code></dd>
</dl>
</li>
</ul>
<a id="releaseUnderreplicatedLedger(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>releaseUnderreplicatedLedger</h4>
<pre class="methodSignature">void&nbsp;releaseUnderreplicatedLedger&#8203;(long&nbsp;ledgerId)
                           throws <a href="../replication/ReplicationException.UnavailableException.html" title="class in org.apache.bookkeeper.replication">ReplicationException.UnavailableException</a></pre>
<div class="block">Release a previously acquired ledger. This allows others to acquire the ledger.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../replication/ReplicationException.UnavailableException.html" title="class in org.apache.bookkeeper.replication">ReplicationException.UnavailableException</a></code></dd>
</dl>
</li>
</ul>
<a id="close()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre class="methodSignature">void&nbsp;close()
    throws <a href="../replication/ReplicationException.UnavailableException.html" title="class in org.apache.bookkeeper.replication">ReplicationException.UnavailableException</a></pre>
<div class="block">Release all resources held by the ledger underreplication manager.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code>close</code>&nbsp;in interface&nbsp;<code>java.lang.AutoCloseable</code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../replication/ReplicationException.UnavailableException.html" title="class in org.apache.bookkeeper.replication">ReplicationException.UnavailableException</a></code></dd>
</dl>
</li>
</ul>
<a id="disableLedgerReplication()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>disableLedgerReplication</h4>
<pre class="methodSignature">void&nbsp;disableLedgerReplication()
                       throws <a href="../replication/ReplicationException.UnavailableException.html" title="class in org.apache.bookkeeper.replication">ReplicationException.UnavailableException</a></pre>
<div class="block">Stop ledger replication. Currently running ledger rereplication tasks
 will be continued and will be stopped from next task. This will block
 ledger replication <code>#Auditor</code> and <a href="#getLedgerToRereplicate()"><code>getLedgerToRereplicate()</code></a>
 tasks.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../replication/ReplicationException.UnavailableException.html" title="class in org.apache.bookkeeper.replication">ReplicationException.UnavailableException</a></code></dd>
</dl>
</li>
</ul>
<a id="enableLedgerReplication()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>enableLedgerReplication</h4>
<pre class="methodSignature">void&nbsp;enableLedgerReplication()
                      throws <a href="../replication/ReplicationException.UnavailableException.html" title="class in org.apache.bookkeeper.replication">ReplicationException.UnavailableException</a></pre>
<div class="block">Resuming ledger replication. This will allow ledger replication
 <code>#Auditor</code> and <a href="#getLedgerToRereplicate()"><code>getLedgerToRereplicate()</code></a> tasks to continue.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../replication/ReplicationException.UnavailableException.html" title="class in org.apache.bookkeeper.replication">ReplicationException.UnavailableException</a></code></dd>
</dl>
</li>
</ul>
<a id="isLedgerReplicationEnabled()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isLedgerReplicationEnabled</h4>
<pre class="methodSignature">boolean&nbsp;isLedgerReplicationEnabled()
                            throws <a href="../replication/ReplicationException.UnavailableException.html" title="class in org.apache.bookkeeper.replication">ReplicationException.UnavailableException</a></pre>
<div class="block">Check whether the ledger replication is enabled or not. This will return
 true if the ledger replication is enabled, otherwise return false.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>- return true if it is enabled otherwise return false</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../replication/ReplicationException.UnavailableException.html" title="class in org.apache.bookkeeper.replication">ReplicationException.UnavailableException</a></code></dd>
</dl>
</li>
</ul>
<a id="notifyLedgerReplicationEnabled(org.apache.bookkeeper.proto.BookkeeperInternalCallbacks.GenericCallback)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>notifyLedgerReplicationEnabled</h4>
<pre class="methodSignature">void&nbsp;notifyLedgerReplicationEnabled&#8203;(<a href="../proto/BookkeeperInternalCallbacks.GenericCallback.html" title="interface in org.apache.bookkeeper.proto">BookkeeperInternalCallbacks.GenericCallback</a>&lt;java.lang.Void&gt;&nbsp;cb)
                             throws <a href="../replication/ReplicationException.UnavailableException.html" title="class in org.apache.bookkeeper.replication">ReplicationException.UnavailableException</a></pre>
<div class="block">Receive notification asynchronously when the ledger replication process
 is enabled.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>cb</code> - - callback implementation to receive the notification</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../replication/ReplicationException.UnavailableException.html" title="class in org.apache.bookkeeper.replication">ReplicationException.UnavailableException</a></code></dd>
</dl>
</li>
</ul>
<a id="initializeLostBookieRecoveryDelay(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initializeLostBookieRecoveryDelay</h4>
<pre class="methodSignature">boolean&nbsp;initializeLostBookieRecoveryDelay&#8203;(int&nbsp;lostBookieRecoveryDelay)
                                   throws <a href="../replication/ReplicationException.UnavailableException.html" title="class in org.apache.bookkeeper.replication">ReplicationException.UnavailableException</a></pre>
<div class="block">Creates the zNode for lostBookieRecoveryDelay with the specified value and returns true.
 If the node is already existing, then it returns false.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>lostBookieRecoveryDelay</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true if it succeeds in creating zNode for lostBookieRecoveryDelay, false if it is already existing</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../replication/ReplicationException.UnavailableException.html" title="class in org.apache.bookkeeper.replication">ReplicationException.UnavailableException</a></code></dd>
</dl>
</li>
</ul>
<a id="setLostBookieRecoveryDelay(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setLostBookieRecoveryDelay</h4>
<pre class="methodSignature">void&nbsp;setLostBookieRecoveryDelay&#8203;(int&nbsp;lostBookieRecoveryDelay)
                         throws <a href="../replication/ReplicationException.UnavailableException.html" title="class in org.apache.bookkeeper.replication">ReplicationException.UnavailableException</a></pre>
<div class="block">Setter for the lostBookieRecoveryDelay znode.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>lostBookieRecoveryDelay</code> - </dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../replication/ReplicationException.UnavailableException.html" title="class in org.apache.bookkeeper.replication">ReplicationException.UnavailableException</a></code></dd>
</dl>
</li>
</ul>
<a id="getLostBookieRecoveryDelay()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLostBookieRecoveryDelay</h4>
<pre class="methodSignature">int&nbsp;getLostBookieRecoveryDelay()
                        throws <a href="../replication/ReplicationException.UnavailableException.html" title="class in org.apache.bookkeeper.replication">ReplicationException.UnavailableException</a></pre>
<div class="block">Getter for the lostBookieRecoveryDelay.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the int value of lostBookieRecoveryDelay</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../replication/ReplicationException.UnavailableException.html" title="class in org.apache.bookkeeper.replication">ReplicationException.UnavailableException</a></code></dd>
</dl>
</li>
</ul>
<a id="setCheckAllLedgersCTime(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setCheckAllLedgersCTime</h4>
<pre class="methodSignature">void&nbsp;setCheckAllLedgersCTime&#8203;(long&nbsp;checkAllLedgersCTime)
                      throws <a href="../replication/ReplicationException.UnavailableException.html" title="class in org.apache.bookkeeper.replication">ReplicationException.UnavailableException</a></pre>
<div class="block">Setter for the CheckAllLedgers last executed ctime.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>checkAllLedgersCTime</code> - </dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../replication/ReplicationException.UnavailableException.html" title="class in org.apache.bookkeeper.replication">ReplicationException.UnavailableException</a></code></dd>
</dl>
</li>
</ul>
<a id="getCheckAllLedgersCTime()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCheckAllLedgersCTime</h4>
<pre class="methodSignature">long&nbsp;getCheckAllLedgersCTime()
                      throws <a href="../replication/ReplicationException.UnavailableException.html" title="class in org.apache.bookkeeper.replication">ReplicationException.UnavailableException</a></pre>
<div class="block">Getter for the CheckAllLedgers last executed ctime.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the long value of checkAllLedgersCTime</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../replication/ReplicationException.UnavailableException.html" title="class in org.apache.bookkeeper.replication">ReplicationException.UnavailableException</a></code></dd>
</dl>
</li>
</ul>
<a id="setPlacementPolicyCheckCTime(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setPlacementPolicyCheckCTime</h4>
<pre class="methodSignature">void&nbsp;setPlacementPolicyCheckCTime&#8203;(long&nbsp;placementPolicyCheckCTime)
                           throws <a href="../replication/ReplicationException.UnavailableException.html" title="class in org.apache.bookkeeper.replication">ReplicationException.UnavailableException</a></pre>
<div class="block">Setter for the PlacementPolicyCheck last executed ctime.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>placementPolicyCheckCTime</code> - </dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../replication/ReplicationException.UnavailableException.html" title="class in org.apache.bookkeeper.replication">ReplicationException.UnavailableException</a></code></dd>
</dl>
</li>
</ul>
<a id="getPlacementPolicyCheckCTime()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPlacementPolicyCheckCTime</h4>
<pre class="methodSignature">long&nbsp;getPlacementPolicyCheckCTime()
                           throws <a href="../replication/ReplicationException.UnavailableException.html" title="class in org.apache.bookkeeper.replication">ReplicationException.UnavailableException</a></pre>
<div class="block">Getter for the PlacementPolicyCheck last executed ctime.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the long value of placementPolicyCheckCTime</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../replication/ReplicationException.UnavailableException.html" title="class in org.apache.bookkeeper.replication">ReplicationException.UnavailableException</a></code></dd>
</dl>
</li>
</ul>
<a id="setReplicasCheckCTime(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setReplicasCheckCTime</h4>
<pre class="methodSignature">void&nbsp;setReplicasCheckCTime&#8203;(long&nbsp;replicasCheckCTime)
                    throws <a href="../replication/ReplicationException.UnavailableException.html" title="class in org.apache.bookkeeper.replication">ReplicationException.UnavailableException</a></pre>
<div class="block">Setter for the ReplicasCheck last executed ctime.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>replicasCheckCTime</code> - </dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../replication/ReplicationException.UnavailableException.html" title="class in org.apache.bookkeeper.replication">ReplicationException.UnavailableException</a></code></dd>
</dl>
</li>
</ul>
<a id="getReplicasCheckCTime()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getReplicasCheckCTime</h4>
<pre class="methodSignature">long&nbsp;getReplicasCheckCTime()
                    throws <a href="../replication/ReplicationException.UnavailableException.html" title="class in org.apache.bookkeeper.replication">ReplicationException.UnavailableException</a></pre>
<div class="block">Getter for the ReplicasCheck last executed ctime.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the long value of replicasCheckCTime</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../replication/ReplicationException.UnavailableException.html" title="class in org.apache.bookkeeper.replication">ReplicationException.UnavailableException</a></code></dd>
</dl>
</li>
</ul>
<a id="notifyUnderReplicationLedgerChanged(org.apache.bookkeeper.proto.BookkeeperInternalCallbacks.GenericCallback)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>notifyUnderReplicationLedgerChanged</h4>
<pre class="methodSignature">void&nbsp;notifyUnderReplicationLedgerChanged&#8203;(<a href="../proto/BookkeeperInternalCallbacks.GenericCallback.html" title="interface in org.apache.bookkeeper.proto">BookkeeperInternalCallbacks.GenericCallback</a>&lt;java.lang.Void&gt;&nbsp;cb)
                                  throws <a href="../replication/ReplicationException.UnavailableException.html" title="class in org.apache.bookkeeper.replication">ReplicationException.UnavailableException</a></pre>
<div class="block">Receive notification asynchronously when the num of under-replicated ledgers  Changed.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>cb</code> - </dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../replication/ReplicationException.UnavailableException.html" title="class in org.apache.bookkeeper.replication">ReplicationException.UnavailableException</a></code></dd>
</dl>
</li>
</ul>
<a id="notifyLostBookieRecoveryDelayChanged(org.apache.bookkeeper.proto.BookkeeperInternalCallbacks.GenericCallback)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>notifyLostBookieRecoveryDelayChanged</h4>
<pre class="methodSignature">void&nbsp;notifyLostBookieRecoveryDelayChanged&#8203;(<a href="../proto/BookkeeperInternalCallbacks.GenericCallback.html" title="interface in org.apache.bookkeeper.proto">BookkeeperInternalCallbacks.GenericCallback</a>&lt;java.lang.Void&gt;&nbsp;cb)
                                   throws <a href="../replication/ReplicationException.UnavailableException.html" title="class in org.apache.bookkeeper.replication">ReplicationException.UnavailableException</a></pre>
<div class="block">Receive notification asynchronously when the lostBookieRecoveryDelay value is Changed.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>cb</code> - </dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../replication/ReplicationException.UnavailableException.html" title="class in org.apache.bookkeeper.replication">ReplicationException.UnavailableException</a></code></dd>
</dl>
</li>
</ul>
<a id="getReplicationWorkerIdRereplicatingLedger(long)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getReplicationWorkerIdRereplicatingLedger</h4>
<pre class="methodSignature">java.lang.String&nbsp;getReplicationWorkerIdRereplicatingLedger&#8203;(long&nbsp;ledgerId)
                                                    throws <a href="../replication/ReplicationException.UnavailableException.html" title="class in org.apache.bookkeeper.replication">ReplicationException.UnavailableException</a></pre>
<div class="block">If a replicationworker has acquired lock on an underreplicated ledger,
 then getReplicationWorkerIdRereplicatingLedger should return
 ReplicationWorkerId (BookieId) of the ReplicationWorker that is holding
 lock. If lock for the underreplicated ledger is not yet acquired or if it
 is released then it is supposed to return null.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ledgerId</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../replication/ReplicationException.UnavailableException.html" title="class in org.apache.bookkeeper.replication">ReplicationException.UnavailableException</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
</footer>
</body>
</html>
